<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CollectClock</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', 'Montserrat', sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      min-height: 100vh;
    }
    :root {
      --bg: #ffffff;
      --text: #000;
      --link: #0000ff;
      --link-hover: #ff4500;
      --timer: #0000ff;
      --hover-bg: #e0e0e0;
    }
    body.dark-mode {
      --bg: #000;
      --text: #00ff00;
      --link: #00ff00;
      --link-hover: #ff00ff;
      --timer: #00ff00;
      --hover-bg: #333;
    }
    .container {
      max-width: 800px;
      margin: auto;
      padding: 2rem;
    }
    h1 {
      font-size: 2em;
    }
    .tooltip { position: relative; display: inline-block; cursor: help; }
    .tooltip .tooltiptext {
      visibility: hidden; background-color: #222; color: #fff;
      text-align: center; border-radius: 6px; padding: 5px 10px;
      position: absolute; z-index: 1; bottom: 125%; left: 50%;
      transform: translateX(-50%); opacity: 0;
      transition: opacity 0.3s;
    }
    .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
    .table { margin-top: 1rem; }
    .table-row {
      display: grid;
      grid-template-columns: 2fr 1fr 2fr;
      gap: 0.5rem;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 10px;
      background: var(--hover-bg);
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      align-items: center;
    }
    .last-collected.available {
      animation: pulseGlow 2s infinite;
    }
    @keyframes pulseGlow {
      0%,100% { color: #4cff79; text-shadow: 0 0 6px #4cff79; }
      50% { color: #b0ff4c; text-shadow: 0 0 12px #b0ff4c; }
    }
    .flip-clock .digit {
      background: #222; color: #0ff;
      padding: 0.2em 0.5em; border-radius: 4px;
      margin: 0 2px;
      font-weight: bold;
    }
    .toggle-mode {
      padding: 10px 20px;
      background: linear-gradient(90deg, #7f5af0, #2cb67d);
      color: white;
      border: none;
      border-radius: 10px;
      margin-top: 10px;
      cursor: pointer;
    }
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: #222;
      color: white;
      padding: 1em 2em;
      border-radius: 10px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
      z-index: 1000;
    }
    .toast.show {
      opacity: 1;
      pointer-events: auto;
    }
    #gif-popup {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #000;
      border-radius: 12px;
      overflow: hidden;
      z-index: 999;
      display: none;
    }
    #gif-popup img {
      width: 200px;
      height: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CollectClock</h1>
    <p>Track your daily casino claims and referral earnings.</p>
    <a id="discord-login-btn" href="#">Login with Discord</a>
    <button id="mode-toggle" class="toggle-mode">Toggle Mode</button>
    <div id="user-stats"></div>
    <div id="casino-table" class="table"></div>
  </div>
  <div class="toast"></div>
  <div id="gif-popup"></div>

  <script>
    const gifUrls = [
      "https://media.giphy.com/media/3og0IPxMM0erATueVW/giphy.gif",
      "https://media.giphy.com/media/1rNWzT3lbTi9K/giphy.gif"
    ];
    const casinoData = [
      {"name":"Hello Millions","link":"https://www.hellomillions.com/lp/raf?r=26d6760f%2F1236643867"},
      {"name":"SpinBlitz","link":"https://www.spinblitz.com/lp/raf?r=606f64a3%2F1246446739"},
      {"name":"Mega Bonanza","link":"https://www.megabonanza.com/?r=72781897"},
      {"name":"Real Prize","link":"https://www.realprize.com/refer/317136"},
      {"name":"LuckyBird","link":"https://luckybird.vip/?c=c_jmenichole"},
      {"name":"WowVegas","link":"https://www.wowvegas.com/?raf=3615494"},
      {"name":"Pulsz","link":"https://www.pulsz.com/?invited_by=utfk4r"},
      {"name":"Modo","link":"https://modo.us?referralCode=61MN6A"},
      {"name":"McLuck","link":"https://www.mcluck.com/lp/raf?r=61119407%2F908900038"},
      {"name":"Crown Coins","link":"https://crowncoinscasino.com/"},
      {"name":"Chanced","link":"https://chanced.com/c/ysa096"},
      {"name":"Stake US","link":"https://stake.us/?c=Jmenichole"},
      {"name":"Sportzino","link":"https://sportzino.com/signup/8a105ba6-7ada-45c8-b021-f478ac03c7c4"},
      {"name":"PlayFame","link":"https://www.playfame.com/lp/raf?r=1275975417"},
      {"name":"Pulsz Bingo","link":"https://www.pulszbingo.com/?invited_by=eg6mbf"},
      {"name":"Jackpota","link":"https://www.jackpota.com/?r=85453282"},
      {"name":"Zula Casino","link":"https://www.zulacasino.com/signup/221ddd92-862e-45d8-acc0-4cd2c26f7cdd"},
      {"name":"Fortune Coins","link":"https://www.fortunecoins.com/signup/3c08936f-8979-4f87-b377-efdbff519029"},
      {"name":"Bitsler","link":"https://www.bitsler.io/?ref=jmenichole"},
      {"name":"MyPrize","link":"https://myprize.us/invite/jmenichole"},
      {"name":"Winna","link":"https://winna.com/?r=jmenichole"},
      {"name":"Club Poker","link":"https://play.clubs.poker/?referralCode=104192"},
      {"name":"Rolla","link":"https://www.rolla.com/?raf=3873"},
      {"name":"Lonestar Casino","link":"https://lonestarcasino.com/refer/678504"},
      {"name":"Spree","link":"https://spree.com/?r=1450539"},
      {"name":"SpinPals","link":"https://www.spinpals.com?referralcode=e851e1a8-c455-4a59-954d-b7fe0bbad04c"},
      {"name":"High 5 Casino","link":"https://high5casino.com/gc?adId=INV001%3AJmenichole"},
      {"name":"TrustDice","link":"https://trustdice.win/faucet/?ref=u_jmenichole"},
      {"name":"Punt","link":"https://punt.com/c/cg60pd"},
      {"name":"FortuneWheelz","link":"https://fortunewheelz.com/?invited_by=P36ZS6"},
      {"name":"Zoot","link":"https://getzoot.us/?referralCode=ZOOTwithJMENICHOLE"},
      {"name":"Spinsala","link":"https://spinsala.com/en?invite=daym"},
      {"name":"Legendz","link":"https://legendz.com/?referred_by_id=221602"},
      {"name":"NoLimitCoins","link":"https://nolimitcoins.com/?invited_by=ZI1JIU"},
      {"name":"Slips","link":"https://slips.com/invite?code=6901"},
      {"name":"PrizePicks","link":"https://app.prizepicks.com/sign-up?invite_code=PR-N0MTQX8&source=iosShare"},
      {"name":"Dabble","link":"https://click.dabble.com/GaFA/js1v7hqv"},
      {"name":"Gamba VPN","link":"https://gamba.com?c=Jme"},
      {"name":"Goated VPN","link":"https://www.goated.com/r/YDRZLJ"},
      {"name":"JungleBet VPN","link":"https://junglebet.com/r/jmenichole"},
      {"name":"Shuffle.com VPN","link":"https://shuffle.com?r=jHR7JnWRPF"},
      {"name":"Stake.com VPN","link":"https://www.stake.com/?c=LAYP68hb"},
      {"name":"MetaWin","link":"https://metawin.com/jmenichole007/"}
    ];
      // ... Add more casinos here
    ];

    function showToast(message) {
      const toast = document.querySelector('.toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }

    function renderCountdown(label, ms) {
      const mins = Math.ceil(ms / 60000);
      const h = Math.floor(mins / 60), m = mins % 60;
      label.innerHTML = `<span class="flip-clock"><span class="digit">${h}</span>h <span class="digit">${m}</span>m</span>`;
      label.classList.add('timer-update');
      setTimeout(() => label.classList.remove('timer-update'), 300);
    }

    function updateTimers() {
      document.querySelectorAll(".table-row").forEach(row => {
        const casino = row.dataset.casino;
        const label = row.querySelector(".last-collected");
        const checkbox = row.querySelector("input");
        const next = localStorage.getItem("casino_" + casino);
        if (next && Date.now() < +next) {
          checkbox.checked = true;
          checkbox.disabled = true;
          label.classList.add("available");
          renderCountdown(label, next - Date.now());
        } else {
          checkbox.checked = false;
          checkbox.disabled = false;
          label.textContent = "Available!";
          label.classList.add("available");
        }
      });
    }

    function handleBonusClick(name) {
      const row = document.querySelector(`.table-row[data-casino="${name}"]`);
      const checkbox = row.querySelector("input");
      const label = row.querySelector(".last-collected");

      if (!confirm("Did you collect your bonus?")) return true;
      let mins = 24 * 60;
      if (!confirm("Is the next collection in 24 hours?")) {
        const input = prompt("How many minutes until the next bonus?");
        mins = parseInt(input);
        if (isNaN(mins) || mins <= 0) {
          showToast("Invalid input");
          return false;
        }
      }

      const nextTime = Date.now() + mins * 60000;
      localStorage.setItem("casino_" + name, nextTime);
      checkbox.checked = true;
      checkbox.disabled = true;

      let count = +(localStorage.getItem("collect_count") || 0) + 1;
      localStorage.setItem("collect_count", count);
      showToast("Bonus collected!");
      updateStats();
      updateTimers();
      if (count % 5 === 0) showGifPopup();
      return true;
    }

    function updateStats() {
      let count = localStorage.getItem("collect_count") || 0;
      document.getElementById("user-stats").innerHTML = `<b>Bonuses Collected:</b> ${count}`;
    }

    function showGifPopup() {
      const popup = document.getElementById("gif-popup");
      popup.innerHTML = Math.random() < 0.2
        ? `<a href="https://ko-fi.com/jmenichole0" target="_blank"><img src="https://ko-fi.com/img/githubbutton_sm.svg" /></a>`
        : `<img src="${gifUrls[Math.floor(Math.random() * gifUrls.length)]}" />`;
      popup.style.display = "block";
      setTimeout(() => popup.style.display = "none", 5000);
    }

    function renderCasinoTable() {
      const container = document.getElementById("casino-table");
      container.innerHTML = "";
      casinoData.forEach(casino => {
        const row = document.createElement("div");
        row.className = "table-row";
        row.dataset.casino = casino.name;
        row.innerHTML = `
          <div class="tooltip">
            <a href="${casino.link}" target="_blank" onclick="return handleBonusClick('${casino.name}')">${casino.name}</a>
            <span class="tooltiptext">${casino.tooltip || ''}</span>
          </div>
          <div><input type="checkbox" /></div>
          <div class="last-collected">Available!</div>`;
        container.appendChild(row);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark-mode");
        document.querySelector(".toggle-mode").textContent = "Untilt";
      }

      renderCasinoTable();
      updateStats();
      updateTimers();
      setInterval(updateTimers, 60000);

      document.getElementById("mode-toggle").addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
        const tilted = document.body.classList.contains("dark-mode");
        localStorage.setItem("darkMode", tilted);
        document.querySelector(".toggle-mode").textContent = tilted ? "Untilt" : "Tilt";
      });

      const cid = "1336968746450812928";
      const btn = document.getElementById("discord-login-btn");
      btn.href = `https://discord.com/oauth2/authorize?client_id=${1336968746450812928}&redirect_uri=${encodeURIComponent('https://jmenichole.github.io/CollectClock/auth.html')}&response_type=token&scope=identify`;
    });
  </script>
</body>
</html>
