<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>üéØ CollectClock - Daily Casino Bonuses</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <style>
    :root {
      /* Light mode color palette */
      --bg: #f8fafc;
      --text: #1e293b;
      --text-secondary: #64748b;
      --text-muted: #94a3b8;
      --primary: #0f172a;
      --primary-light: #334155;
      --accent: #3b82f6;
      --accent-light: #dbeafe;
      --success: #10b981;
      --success-light: #d1fae5;
      --danger: #ef4444;
      --danger-light: #fee2e2;
      --warning: #f59e0b;
      --warning-light: #fef3c7;
      --border: #e2e8f0;
      --border-light: #f1f5f9;
      --card-bg: #ffffff;
      --card-hover: #f8fafc;
      --shadow: rgba(15, 23, 42, 0.08);
      --shadow-hover: rgba(15, 23, 42, 0.12);
    }
    
    [data-theme="dark"] {
      /* Dark mode color palette */
      --bg: #0f172a;
      --text: #f1f5f9;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --primary: #f1f5f9;
      --primary-light: #cbd5e1;
      --accent: #60a5fa;
      --accent-light: #1e3a5f;
      --success: #34d399;
      --success-light: #064e3b;
      --danger: #f87171;
      --danger-light: #7f1d1d;
      --warning: #fbbf24;
      --warning-light: #78350f;
      --border: #1e293b;
      --border-light: #334155;
      --card-bg: #1e293b;
      --card-hover: #334155;
      --shadow: rgba(0, 0, 0, 0.3);
      --shadow-hover: rgba(0, 0, 0, 0.4);
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      min-height: 100vh;
      line-height: 1.6;
      font-size: 14px;
    }
    
    .container { 
      max-width: 1200px; 
      margin: 2rem auto; 
      padding: 0 1rem;
    }
    
    h1 { 
      text-align: center; 
      font-size: 2rem; 
      font-weight: 700;
      color: var(--primary);
      margin: 2rem 0;
      letter-spacing: -0.025em;
    }

    .header-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      gap: 1rem;
    }
    
    .search-container {
      flex: 1;
      max-width: 400px;
    }
    
    .search-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-size: 0.875rem;
      background: var(--card-bg);
      color: var(--text);
      transition: border-color 0.2s ease;
    }
    
    .search-input:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .admin-btn {
      padding: 0.75rem 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    
    .admin-btn:hover {
      background: var(--primary-light);
    }
    
    .theme-toggle {
      padding: 0.75rem;
      background: var(--card-bg);
      color: var(--text);
      border: 2px solid var(--border);
      border-radius: 8px;
      font-size: 1.25rem;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 46px;
      height: 46px;
    }
    
    .theme-toggle:hover {
      background: var(--card-hover);
      border-color: var(--accent);
    }
    
    .casino-category {
      margin-bottom: 2rem;
    }
    
    .category-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 1rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .category-header:hover {
      background: var(--card-hover);
      box-shadow: 0 2px 8px var(--shadow);
    }
    
    .category-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--primary);
    }
    
    .category-icon {
      font-size: 1.25rem;
    }
    
    .category-meta {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-secondary);
      font-size: 0.875rem;
    }
    
    .category-count {
      background: var(--accent-light);
      color: var(--accent);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-weight: 500;
      font-size: 0.75rem;
    }
    
    .category-toggle {
      font-size: 0.875rem;
      color: var(--text-muted);
    }
    
    .casino-list {
      display: grid;
      gap: 0.75rem;
    }
    
    .table-row {
      display: grid; 
      grid-template-columns: 1fr auto auto;
      gap: 1.5rem; 
      padding: 0.875rem 1rem; 
      border-radius: 8px; 
      background: var(--card-bg);
      border: 1px solid var(--border);
      align-items: center;
      transition: all 0.15s ease;
    }
    
    .table-row:hover {
      border-color: var(--accent);
      box-shadow: 0 1px 4px var(--shadow);
    }
    
    .casino-name a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      transition: color 0.15s ease;
    }
    
    .casino-name a:hover {
      color: var(--accent);
      text-decoration: underline;
    }
    
    .collect-checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-radius: 4px;
      background: var(--card-bg);
      cursor: pointer;
      transition: all 0.2s ease;
      margin: 0;
    }
    
    .collect-checkbox:checked {
      background: var(--success);
      border-color: var(--success);
    }
    
    .collect-checkbox:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .timer-display {
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--text-secondary);
      min-width: 90px;
      text-align: right;
      cursor: pointer;
      user-select: none;
    }
    
    .timer-display:hover {
      color: var(--accent);
    }
    
    .timer-display.available {
      color: var(--success);
      font-weight: 700;
    }
    
    .bonus-count {
      text-align: right;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }
    
    .footer {
      margin-top: 3rem;
      padding: 2rem 0;
      border-top: 1px solid var(--border);
      text-align: center;
    }
    
    .footer-info {
      color: var(--text-secondary);
      font-size: 0.875rem;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }
    
    .footer-info a {
      color: var(--accent);
      text-decoration: none;
      font-weight: 500;
    }
    
    .footer-info a:hover {
      text-decoration: underline;
    }
    
    .reset-btn {
      padding: 0.75rem 1.5rem;
      background: var(--danger);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    
    .reset-btn:hover {
      background: #dc2626;
    }
    
    /* Category variations */
    .category-crypto .category-count {
      background: #fef3c7;
      color: #d97706;
    }
    
    .category-social .category-count {
      background: #dbeafe;
      color: #2563eb;
    }
    
    .category-sports .category-count {
      background: #fee2e2;
      color: #dc2626;
    }
    
    .category-vpn .category-count {
      background: #f3e8ff;
      color: #7c3aed;
    }
    
    .category-instant .category-count {
      background: #d1fae5;
      color: #059669;
    }
    
    /* Modal and toast styles */
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: var(--primary);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px var(--shadow);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }
    
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    /* Hidden elements */
    .hidden {
      display: none !important;
    }
    
    /* Category filter buttons */
    .category-filter-btn:hover {
      border-color: var(--accent);
      transform: translateY(-1px);
      box-shadow: 0 2px 4px var(--shadow);
    }
    
    .category-filter-btn.active {
      background: var(--accent) !important;
      color: #fff !important;
      border-color: var(--accent);
    }
    
    /* Responsive design */
    @media (max-width: 768px) {
      .container {
        margin: 1rem;
        padding: 0 0.5rem;
      }
      
      .header-actions {
        flex-direction: column;
        gap: 1rem;
      }
      
      .search-container {
        max-width: none;
      }
      
      .table-row {
        grid-template-columns: 1fr auto auto;
        gap: 0.75rem;
        padding: 0.675rem 0.75rem;
      }
      
      .timer-display {
        font-size: 0.8rem;
        min-width: 80px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéØ CollectClock - Daily Casino Bonuses</h1>
    
    <div class="header-actions">
      <div class="search-container">
        <input type="text" class="search-input" id="casino-search" placeholder="Search casinos..." />
      </div>
      <button class="theme-toggle" id="theme-toggle" title="Toggle dark mode">
        <span id="theme-icon">üåô</span>
      </button>
      <button class="admin-btn" id="help-btn" title="Show help and keyboard shortcuts (Press ?)">‚ùì Help</button>
      <button class="admin-btn" id="admin-btn">Admin</button>
    </div>
    
    <div style="display:flex;gap:0.5rem;margin:1.5rem 0;flex-wrap:wrap;justify-content:center;">
      <button class="category-filter-btn active" data-category="all" style="padding:0.5rem 1rem;border:2px solid var(--border);background:var(--accent);color:#fff;border-radius:6px;cursor:pointer;font-size:0.85rem;font-weight:500;transition:all 0.2s;">üéØ All</button>
      <button class="category-filter-btn" data-category="crypto" style="padding:0.5rem 1rem;border:2px solid var(--border);background:var(--card-bg);color:var(--text);border-radius:6px;cursor:pointer;font-size:0.85rem;font-weight:500;transition:all 0.2s;">ü™ô Crypto</button>
      <button class="category-filter-btn" data-category="instant" style="padding:0.5rem 1rem;border:2px solid var(--border);background:var(--card-bg);color:var(--text);border-radius:6px;cursor:pointer;font-size:0.85rem;font-weight:500;transition:all 0.2s;">‚ö° Instant</button>
      <button class="category-filter-btn" data-category="social" style="padding:0.5rem 1rem;border:2px solid var(--border);background:var(--card-bg);color:var(--text);border-radius:6px;cursor:pointer;font-size:0.85rem;font-weight:500;transition:all 0.2s;">üé∞ Social</button>
    </div>

    <div id="casino-table-available"></div>
    <div id="casino-table-cooldown" style="margin-top:2rem;"></div>
    
    <div style="display:flex;justify-content:space-between;align-items:center;margin:2rem 0;flex-wrap:wrap;gap:1rem;">
      <div class="bonus-count" id="bonus-count" style="margin:0;"></div>
      <div style="display:flex;gap:0.5rem;flex-wrap:wrap;">
        <button class="admin-btn" id="refresh-stats-btn" style="background:var(--accent);padding:0.5rem 1rem;font-size:0.85rem;" title="Refresh statistics and timers">üîÑ Refresh</button>
      </div>
    </div>
  </div>
  
  <footer class="footer">
    <div class="footer-info" id="footer-info">
      made for degens by degens ‚ù§Ô∏è<br/>
      üí° Suggest a casino? <a href="https://discord.gg/3hmXPwwa" target="_blank" rel="noopener">Drop it in Discord</a><br/>
      ‚òï Powered by <a href="https://ko-fi.com/jmenichole0" target="_blank" rel="noopener">Ko-fi</a>
    </div>
    <button class="reset-btn" id="reset-timers-btn">Reset All Timers</button>
  </footer>

  <div class="toast" aria-live="polite"></div>
  <div id="gif-popup" style="display:none;"></div>
  <div id="bonus-modal" style="display:none;position:fixed;z-index:3000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.45);align-items:center;justify-content:center;">
    <div style="background:#fff;color:#222;padding:2em 1.5em;border-radius:16px;box-shadow:0 4px 24px #000a;max-width:90vw;text-align:center;">
      <div id="bonus-modal-msg" style="font-size:1.15em;margin-bottom:1.2em;"></div>
      <div>
        <button id="bonus-modal-yes" style="padding:10px 28px;margin:0 1em 0 0;background:#2cb67d;color:#fff;border:none;border-radius:8px;font-size:1em;font-weight:bold;cursor:pointer;">Yes</button>
        <button id="bonus-modal-no" style="padding:10px 28px;background:#e91e63;color:#fff;border:none;border-radius:8px;font-size:1em;font-weight:bold;cursor:pointer;">No</button>
      </div>
    </div>
  </div>
  <div id="casino-info-modal" style="display:none;position:fixed;z-index:2000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;">
    <div class="casino-info-card">
      <div class="casino-info-header">
        <h3 id="casino-info-title"></h3>
        <button id="casino-info-close" style="background:none;border:none;font-size:1.5em;cursor:pointer;color:#666;">√ó</button>
      </div>
      <div id="casino-info-content"></div>
    </div>
  </div>
  <div id="admin-panel" style="display:none;position:fixed;z-index:3000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);align-items:center;justify-content:center;">
    <div style="background:#fff;color:#222;padding:2em 1.5em;border-radius:16px;box-shadow:0 4px 24px #000a;max-width:800px;max-height:90vh;overflow:auto;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5em;">
        <h2 style="margin:0;">Admin Panel</h2>
        <button id="admin-close-btn" style="background:none;border:none;font-size:1.5em;cursor:pointer;color:#666;">√ó</button>
      </div>
      <h3>Casino Click Statistics</h3>
      <div id="admin-clicks-list" style="max-height:400px;overflow:auto;border:1px solid #ddd;padding:1em;border-radius:8px;background:#f9f9f9;">
        <p>Loading statistics...</p>
      </div>
    </div>
  </div>
  <div id="admin-password-modal" style="display:none;position:fixed;z-index:3001;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);align-items:center;justify-content:center;">
    <div style="background:#fff;color:#222;padding:2em 1.5em;border-radius:16px;box-shadow:0 4px 24px #000a;max-width:400px;text-align:center;">
      <h3 style="margin:0 0 1em 0;">Admin Access</h3>
      <input type="password" id="admin-password-input" placeholder="Enter password" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;font-size:1em;margin-bottom:1em;">
      <div>
        <button id="admin-password-submit" style="padding:10px 28px;margin:0 1em 0 0;background:#2cb67d;color:#fff;border:none;border-radius:8px;font-size:1em;font-weight:bold;cursor:pointer;">Login</button>
        <button id="admin-password-cancel" style="padding:10px 28px;background:#e91e63;color:#fff;border:none;border-radius:8px;font-size:1em;font-weight:bold;cursor:pointer;">Cancel</button>
      </div>
    </div>
  </div>
  
  <!-- Help Modal -->
  <div id="help-modal" style="display:none;position:fixed;z-index:3000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);align-items:center;justify-content:center;overflow-y:auto;">
    <div style="background:var(--card-bg);color:var(--text);padding:2em 1.5em;border-radius:16px;box-shadow:0 4px 24px rgba(0,0,0,0.3);max-width:700px;max-height:90vh;overflow-y:auto;margin:2em;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5em;border-bottom:2px solid var(--border);padding-bottom:1em;">
        <h2 style="margin:0;color:var(--primary);">üìö CollectClock Help & Guide</h2>
        <button id="help-close-btn" style="background:none;border:none;font-size:1.8em;cursor:pointer;color:var(--text-secondary);line-height:1;">√ó</button>
      </div>
      
      <div style="margin-bottom:2em;">
        <h3 style="color:var(--accent);margin-bottom:0.5em;">üéØ How It Works</h3>
        <p style="line-height:1.6;color:var(--text-secondary);">CollectClock helps you track daily casino bonuses and free plays across multiple platforms. Click the checkbox when you collect a bonus, and it will start a countdown timer until your next collection is available.</p>
      </div>
      
      <div style="margin-bottom:2em;">
        <h3 style="color:var(--accent);margin-bottom:0.5em;">‚å®Ô∏è Keyboard Shortcuts</h3>
        <div style="background:var(--border-light);padding:1em;border-radius:8px;">
          <div style="display:grid;grid-template-columns:auto 1fr;gap:0.5em 1em;font-family:monospace;font-size:0.9em;">
            <strong style="color:var(--primary);">?</strong><span style="color:var(--text-secondary);">Show this help modal</span>
            <strong style="color:var(--primary);">Esc</strong><span style="color:var(--text-secondary);">Close modal or clear search</span>
            <strong style="color:var(--primary);">‚Üë/‚Üì</strong><span style="color:var(--text-secondary);">Navigate between casinos</span>
            <strong style="color:var(--primary);">Tab</strong><span style="color:var(--text-secondary);">Move to next element</span>
            <strong style="color:var(--primary);">/</strong><span style="color:var(--text-secondary);">Focus search box</span>
          </div>
        </div>
      </div>
      
      <div style="margin-bottom:2em;">
        <h3 style="color:var(--accent);margin-bottom:0.5em;">üí° Pro Tips</h3>
        <ul style="line-height:1.8;color:var(--text-secondary);padding-left:1.5em;">
          <li><strong>Click casino names</strong> to visit and collect bonuses (affiliate links help support this tool!)</li>
          <li><strong>Click timers</strong> to manually edit countdown times</li>
          <li><strong>Search casinos</strong> using the search bar at the top</li>
          <li><strong>Categories expand/collapse</strong> - click category headers to organize your view</li>
          <li><strong>Dark mode toggle</strong> - click the moon/sun icon for your preferred theme</li>
          <li><strong>Data is saved locally</strong> in your browser - clear browser data will reset your timers</li>
        </ul>
      </div>
      
      <div style="margin-bottom:2em;">
        <h3 style="color:var(--accent);margin-bottom:0.5em;">üîß Advanced Features</h3>
        <div style="background:var(--border-light);padding:1em;border-radius:8px;">
          <p style="margin:0 0 1em 0;color:var(--text-secondary);"><strong>Export/Import Data:</strong> Use the buttons below to backup or restore your collection data.</p>
          <div style="display:flex;gap:0.5em;flex-wrap:wrap;">
            <button id="export-data-btn" style="padding:0.5em 1em;background:var(--success);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:0.9em;">üì• Export Data</button>
            <button id="import-data-btn" style="padding:0.5em 1em;background:var(--accent);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:0.9em;">üì§ Import Data</button>
            <button id="clear-all-btn" style="padding:0.5em 1em;background:var(--danger);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:0.9em;">üóëÔ∏è Clear All Data</button>
          </div>
        </div>
      </div>
      
      <div style="margin-bottom:1em;">
        <h3 style="color:var(--accent);margin-bottom:0.5em;">üìä Statistics</h3>
        <div style="background:var(--border-light);padding:1em;border-radius:8px;">
          <div id="help-stats" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1em;">
            <div>
              <div style="font-size:1.5em;font-weight:bold;color:var(--success);" id="total-collections">0</div>
              <div style="color:var(--text-secondary);font-size:0.9em;">Total Collections</div>
            </div>
            <div>
              <div style="font-size:1.5em;font-weight:bold;color:var(--accent);" id="available-now">0</div>
              <div style="color:var(--text-secondary);font-size:0.9em;">Available Now</div>
            </div>
            <div>
              <div style="font-size:1.5em;font-weight:bold;color:var(--warning);" id="on-cooldown">0</div>
              <div style="color:var(--text-secondary);font-size:0.9em;">On Cooldown</div>
            </div>
          </div>
        </div>
      </div>
      
      <div style="text-align:center;padding-top:1em;border-top:1px solid var(--border);">
        <button id="help-close-btn-bottom" style="padding:0.75em 2em;background:var(--primary);color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:500;">Got it!</button>
      </div>
    </div>
  </div>  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
  // Fallback confetti function in case CDN is blocked
  if (typeof confetti === 'undefined') {
    window.confetti = function() {
      console.log('Confetti would be displayed here');
    };
  }
  </script>
  <script>
  // Theme toggle functionality
  (function() {
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    const html = document.documentElement;
    
    // Load saved theme preference or default to light
    const savedTheme = localStorage.getItem('theme') || 'light';
    html.setAttribute('data-theme', savedTheme);
    updateThemeIcon(savedTheme);
    
    function updateThemeIcon(theme) {
      themeIcon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    }
    
    themeToggle.addEventListener('click', () => {
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcon(newTheme);
    });
  })();
  </script>
  <script>
  (function() {
    // --- Sound asset URLs (using local files) ---
    const tiltSound = new Audio("assets/audio/798635__cvltiv8r__cvlt-bass-94.wav");
    const untiltSound = new Audio("assets/audio/810164__mokasza__awesome-bubble-pop.mp3");
    const uwuSound = new Audio("assets/audio/800976__sadiquecat__other-uwu-2.wav");

    // --- Casino data and functionality ---

    const gifUrls = [
      "https://media.giphy.com/media/3o6Zt6ML6BklcajjsA/giphy.gif",
      "https://media.giphy.com/media/l0HUpt2s9Pclgt9Vm/giphy.gif",
      "https://media.giphy.com/media/3ohc1bTn4ZDEd4nSSA/giphy.gif"
    ];
    window.casinoData = [
      // ü™ô Crypto Casinos
      { 
        name: "TrustDice", 
        tilted: "https://trustdice.win/faucet/?ref=u_jmenichole", 
        clean: "https://trustdice.win", 
        category: "crypto",
        info: {
          dailyBonus: "Free coins + 25% rakeback",
          frequency: "Every 24 hours",
          redemption: "Instant",
          timeframe: "No minimum withdrawal",
          notes: "Provably fair games, cryptocurrency focus",
          trustScore: 85
        }
      },
      { 
        name: "Stake US", 
        tilted: "https://stake.us/?c=Jmenichole", 
        clean: "https://stake.us", 
        category: "crypto",
        info: {
          dailyBonus: "10,000 GC + 1 Stake Cash (SC)",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "No wagering requirement",
          notes: "US-licensed, sweepstakes casino",
          trustScore: 92
        }
      },
      { 
        name: "Bitsler", 
        tilted: "https://www.bitsler.io/?ref=jmenichole", 
        clean: "https://www.bitsler.io", 
        category: "crypto",
        info: {
          dailyBonus: "0.0001+ BTC faucet",
          frequency: "Every 6 hours",
          redemption: "Instant",
          timeframe: "0.001 BTC minimum withdrawal",
          notes: "Multi-crypto support, established 2015",
          trustScore: 88
        }
      },
      { name: "Rolla", tilted: "https://www.rolla.com/?raf=3873", clean: "https://www.rolla.com", category: "crypto" },
      { 
        name: "Punt", 
        tilted: "https://punt.com/c/cg60pd", 
        clean: "https://punt.com", 
        category: "crypto",
        info: {
          dailyBonus: "1,000 GC + 0.10 SC every hour (up to 24,000 GC + 2.4 SC/day)",
          frequency: "Hourly (each 1h)",
          redemption: "Instant (after claim)",
          timeframe: "No minimum withdrawal",
          notes: "Unique hourly bonus system, crypto focus",
          trustScore: 89
        }
      },
      { name: "Shuffle.us", tilted: "https://shuffle.us?r=jmenichole", clean: "https://shuffle.us", category: "crypto" },
      
      // ‚ö° Instant Cashout
      { 
        name: "WowVegas", 
        tilted: "https://www.wowvegas.com/?raf=3615494", 
        clean: "https://www.wowvegas.com", 
        category: "instant",
        info: {
          dailyBonus: "~750‚Äì175,000+ WOW Coins and ~0.1‚Äì3.5+ SC (by VIP level)",
          frequency: "Daily (wheel spin)",
          redemption: "Instant (spin on login)",
          timeframe: "Instant for crypto, 3-5 days for bank",
          notes: "Social casino, sweepstakes model with VIP scaling",
          trustScore: 90
        }
      },
      { 
        name: "Pulsz", 
        tilted: "https://www.pulsz.com/?invited_by=utfk4r", 
        clean: "https://www.pulsz.com", 
        category: "instant",
        info: {
          dailyBonus: "2,500 GC + 0.30 SC (rising with streak)",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant crypto, 1-3 days ACH",
          notes: "Established sweepstakes platform with streak bonuses",
          trustScore: 94
        }
      },
      { name: "Modo", tilted: "https://modo.us?referralCode=61MN6A", clean: "https://modo.us", category: "instant" },
      { 
        name: "McLuck", 
        tilted: "https://www.mcluck.com/lp/raf?r=61119407%2F908900038", 
        clean: "https://www.mcluck.com", 
        category: "instant",
        info: {
          dailyBonus: "2,500 GC + up to 2.5 SC (random)",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Random bonus amounts with high SC potential",
          trustScore: 88
        }
      },
      { 
        name: "Crown Coins", 
        tilted: "https://crowncoinscasino.com/", 
        clean: "https://crowncoinscasino.com", 
        category: "instant",
        info: {
          dailyBonus: "5,000 GC (Day 1) up to 100,000 GC (Day 30)",
          frequency: "Daily (resets 6 AM ET)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Progressive daily bonus increasing with consecutive logins",
          trustScore: 85
        }
      },
      { 
        name: "Chanced", 
        tilted: "https://chanced.com/c/ysa096", 
        clean: "https://chanced.com", 
        category: "instant",
        info: {
          dailyBonus: "~5,000‚Äì20,000 Gold Coins + up to 1 Sweeps Coin",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Variable bonus amounts, increasing each day",
          trustScore: 82
        }
      },
      { name: "Pulsz Bingo", tilted: "https://www.pulszbingo.com/?invited_by=eg6mbf", clean: "https://www.pulszbingo.com", category: "instant" },
      { 
        name: "Zula Casino", 
        tilted: "https://www.zulacasino.com/signup/221ddd92-862e-45d8-acc0-4cd2c26f7cdd", 
        clean: "https://www.zulacasino.com", 
        category: "instant",
        info: {
          dailyBonus: "10,000 GC + 1 SC",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "High daily sweeps coin bonus",
          trustScore: 87
        }
      },
      { 
        name: "Fortune Coins", 
        tilted: "https://www.fortunecoins.com/signup/3c08936f-8979-4f87-b377-efdbff519029", 
        clean: "https://www.fortunecoins.com", 
        category: "instant",
        info: {
          dailyBonus: "Up to 300,000 GC + 100 FC (‚âà1 SC) per 7-day cycle",
          frequency: "Daily (6-day streak)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Weekly cycle with massive bonus potential",
          trustScore: 89
        }
      },
      { 
        name: "High 5 Casino", 
        tilted: "https://high5casino.com/gc?adId=INV001%3AJmenichole", 
        clean: "https://high5casino.com", 
        category: "instant",
        info: {
          dailyBonus: "~0.1 SC per day (plus small GC/diamond bonuses)",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Focus on sweeps coins with additional diamond rewards",
          trustScore: 83
        }
      },
      { name: "Scrooge Casino", tilted: "https://refer.scrooge.casino/674fb6c5fbffe157e92556c8-1740545357394", clean: "https://scrooge.casino", category: "instant" },
      { name: "American Luck", tilted: "https://americanluck.com/signup/e360918f-8986-4dec-9823-a902d3f4936a", clean: "https://americanluck.com", category: "instant" },
      
      // Missing major casinos from PDF
      { 
        name: "Chumba Casino", 
        tilted: "https://chumbacasino.com", 
        clean: "https://chumbacasino.com", 
        category: "instant",
        info: {
          dailyBonus: "200,000 GC + 1 SC",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "One of the largest daily GC bonuses available",
          trustScore: 95
        }
      },
      {
        name: "Global Poker",
        tilted: "https://globalpoker.com",
        clean: "https://globalpoker.com",
        category: "social",
        info: {
          dailyBonus: "1,000 GC (base) up to 2,500 GC (Day 7 streak)",
          frequency: "Daily (7-day cycle)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Poker-focused with streak bonuses, Gold Coins as poker chips",
          trustScore: 91
        }
      },
      {
        name: "LuckyLand Slots",
        tilted: "https://luckyland.com",
        clean: "https://luckyland.com",
        category: "instant",
        info: {
          dailyBonus: "2,400 GC + 0.3 SC (Days 1‚Äì6); 1.0 SC (Day 7) + 400 GC every 4h",
          frequency: "Daily/4h",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Unique 4-hour bonus system plus daily streak",
          trustScore: 93
        }
      },
      
      // üèÜ Sports Betting
      { name: "Sportzino", tilted: "https://sportzino.com/signup/8a105ba6-7ada-45c8-b021-f478ac03c7c4", clean: "https://sportzino.com", category: "sports" },
      { name: "Slips", tilted: "https://slips.com/invite?code=6901", clean: "https://slips.com", category: "sports" },
      { name: "PrizePicks", tilted: "https://app.prizepicks.com/sign-up?invite_code=PR-N0MTQX8&source=iosShare", clean: "https://app.prizepicks.com", category: "sports" },
      { name: "Dabble", tilted: "https://click.dabble.com/GaFA/js1v7hqv", clean: "https://dabble.com", category: "sports" },
      
      // üåê VPN Required
      { name: "Gamba VPN", tilted: "https://gamba.com?c=Jme", clean: "https://gamba.com", category: "vpn" },
      { name: "Goated VPN", tilted: "https://www.goated.com/r/YDRZLJ", clean: "https://www.goated.com", category: "vpn" },
      { name: "JungleBet VPN", tilted: "https://junglebet.com/r/jmenichole", clean: "https://junglebet.com", category: "vpn" },
      { name: "Shuffle.com VPN", tilted: "https://shuffle.com?r=jHR7JnWRPF", clean: "https://shuffle.com", category: "vpn" },
      { name: "Stake.com VPN", tilted: "https://www.stake.com/?c=LAYP68hb", clean: "https://www.stake.com", category: "vpn" },
      { name: "MetaWin VPN", tilted: "https://metawin.com/jmenichole007/", clean: "https://metawin.com", category: "vpn" },
      { name: "The Money Factory VPN", tilted: "https://www.themoneyfactory.com/referral?referralcode=dcd04112-f619-48ee-aec6-2e5a84c9a6d2", clean: "https://www.themoneyfactory.com", category: "vpn" },
      { name: "Thrill VPN", tilted: "https://thrill.com/?r=3E8477CE-1756119554", clean: "https://thrill.com", category: "vpn" },
      
      // üé∞ Social Casinos
      { name: "MetaWin", tilted: "https://metawin.com/jmenichole007/", clean: "https://metawin.com", category: "social" },
      { name: "SpinBlitz", tilted: "https://www.spinblitz.com/lp/raf?r=606f64a3%2F1246446739", clean: "https://www.spinblitz.com", category: "social" },
      { 
        name: "Hello Millions", 
        tilted: "https://www.hellomillions.com/lp/raf?r=26d6760f%2F1236643867", 
        clean: "https://www.hellomillions.com", 
        category: "social",
        info: {
          dailyBonus: "~1,500 GC + 0.2 SC per daily spin",
          frequency: "Daily (24h)",
          redemption: "Instant (spin on login)",
          timeframe: "Instant withdrawal",
          notes: "Daily wheel spin bonus system",
          trustScore: 84
        }
      },
      { 
        name: "Mega Bonanza", 
        tilted: "https://www.megabonanza.com/?r=72781897", 
        clean: "https://www.megabonanza.com", 
        category: "social",
        info: {
          dailyBonus: "1,500 GC + 0.20 SC",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Consistent daily bonus amounts",
          trustScore: 81
        }
      },
      { 
        name: "Real Prize", 
        tilted: "https://www.realprize.com/refer/317136", 
        clean: "https://www.realprize.com", 
        category: "social",
        info: {
          dailyBonus: "Base 1,500 GC + 0.30 SC (increases via VIP to 25k GC + 5 SC)",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "VIP scaling with massive bonus potential",
          trustScore: 86
        }
      },
      { 
        name: "LuckyBird", 
        tilted: "https://luckybird.vip/?c=c_jmenichole", 
        clean: "https://luckybird.vip", 
        category: "social",
        info: {
          dailyBonus: "~2,000 GC + 0.2 SC (rising to 1 SC at higher VIP)",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "VIP system with 5x sweeps coin scaling",
          trustScore: 85
        }
      },
      { 
        name: "PlayFame", 
        tilted: "https://www.playfame.com/lp/raf?r=1275975417", 
        clean: "https://www.playfame.com", 
        category: "social",
        info: {
          dailyBonus: "1,500 GC + 0.2‚Äì2 SC (varies/random)",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Random SC bonus with 10x variance potential",
          trustScore: 83
        }
      },
      { 
        name: "Jackpota", 
        tilted: "https://www.jackpota.com/?r=85453282", 
        clean: "https://www.jackpota.com", 
        category: "social",
        info: {
          dailyBonus: "1,500 GC + 0.20 SC",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Consistent daily bonus amounts",
          trustScore: 80
        }
      },
      { name: "MyPrize", tilted: "https://myprize.us/invite/jmenichole", clean: "https://myprize.us", category: "social" },
      { name: "Winna", tilted: "https://winna.com/?r=jmenichole", clean: "https://winna.com", category: "social" },
      { 
        name: "Clubs Poker", 
        tilted: "https://play.clubs.poker/?referralCode=104192", 
        clean: "https://play.clubs.poker", 
        category: "social",
        info: {
          dailyBonus: "1,000 GC + 0.20 SC",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Poker-focused social casino",
          trustScore: 82
        }
      },
      { name: "Lonestar Casino", tilted: "https://lonestarcasino.com/refer/678504", clean: "https://lonestarcasino.com", category: "social" },
      { 
        name: "Spree", 
        tilted: "https://spree.com/?r=1450539", 
        clean: "https://spree.com", 
        category: "social",
        info: {
          dailyBonus: "2,000 GC + 0.4 SC",
          frequency: "Daily (24h)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Above average sweeps coin daily bonus",
          trustScore: 84
        }
      },
      { name: "SpinPals", tilted: "https://www.spinpals.com?referralcode=e851e1a8-c455-4a59-954d-b7fe0bbad04c", clean: "https://www.spinpals.com", category: "social" },
      { 
        name: "FortuneWheelz", 
        tilted: "https://fortunewheelz.com/?invited_by=P36ZS6", 
        clean: "https://fortunewheelz.com", 
        category: "social",
        info: {
          dailyBonus: "Day 1: 20 GC + 20 Fortune Coins; up to 10 free spins (Day 7)",
          frequency: "Daily (7-day streak)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Week-long streak system with free spins",
          trustScore: 79
        }
      },
      { 
        name: "Zoot", 
        tilted: "https://getzoot.us/?referralCode=ZOOTwithJMENICHOLE", 
        clean: "https://getzoot.us", 
        category: "social",
        info: {
          dailyBonus: "~1,000 GC daily (plus occasional 0.5 SC)",
          frequency: "Daily (7-day cycle)",
          redemption: "Instant (after login)",
          timeframe: "Instant withdrawal",
          notes: "Weekly cycle with bonus SC on later days",
          trustScore: 78
        }
      },
      { name: "Spinsala", tilted: "https://spinsala.com/en?invite=daym", clean: "https://spinsala.com", category: "social" },
      { name: "Legendz", tilted: "https://legendz.com/?referred_by_id=221602", clean: "https://legendz.com", category: "social" },
      { name: "Lucky Bits Vegas", tilted: "https://luckybitsvegas.com/gc?adId=INV001%3Ajmenichole", clean: "https://luckybitsvegas.com", category: "instant" },
      { name: "Gold Treasure Casino", tilted: "https://goldtreasurecasino.com?referrer=5lj4zbEr", clean: "https://goldtreasurecasino.com", category: "instant" },
      { name: "Scarlet Sands", tilted: "https://scarletsands.com/?invited_by=CNVOA0", clean: "https://scarletsands.com", category: "instant" },
      { name: "Cases.gg", tilted: "https://cases.gg/r/JMENICHOLE", clean: "https://cases.gg", category: "social" },
      { name: "Jemlit", tilted: "https://jemlit.com/en/a/Jmenichole", clean: "https://jemlit.com", category: "social" },
    ];

    // --- Casino Information Modal Functions ---
    window.showCasinoInfo = function(casinoName) {
      const casino = window.casinoData.find(c => c.name === casinoName);
      if (!casino || !casino.info) return;
      
      const modal = document.getElementById('casino-info-modal');
      const title = document.getElementById('casino-info-title');
      const content = document.getElementById('casino-info-content');
      
      title.textContent = casino.name;
      
      // Build the content HTML
      let contentHTML = `
        <div class="casino-info-field">
          <span class="casino-info-label">Daily Bonus</span>
          <div class="casino-info-value">${casino.info.dailyBonus}</div>
        </div>
        
        <div class="casino-info-field">
          <span class="casino-info-label">Collection Frequency</span>
          <div class="casino-info-value">${casino.info.frequency}</div>
        </div>
        
        <div class="casino-info-field">
          <span class="casino-info-label">Redemption Type</span>
          <div class="casino-info-value">${casino.info.redemption}</div>
        </div>
        
        <div class="casino-info-field">
          <span class="casino-info-label">Withdrawal Timeframe</span>
          <div class="casino-info-value">${casino.info.timeframe}</div>
        </div>
        
        <div class="casino-info-field">
          <span class="casino-info-label">Trust Score</span>
          <div class="casino-info-value">
            <div class="trust-score">
              <div class="trust-score-bar">
                <div class="trust-score-fill" style="width: ${casino.info.trustScore}%"></div>
              </div>
              <span class="trust-score-number">${casino.info.trustScore}/100</span>
            </div>
          </div>
        </div>
        
        <div class="casino-info-field">
          <span class="casino-info-label">Additional Notes</span>
          <div class="casino-info-value">${casino.info.notes}</div>
          <div class="casino-category-badge">${casino.category}</div>
        </div>
      `;
      
      content.innerHTML = contentHTML;
      modal.style.display = 'flex';
      
      // Add keyboard event listener for escape key
      document.addEventListener('keydown', window.handleCasinoInfoKeydown);
      
      // Focus the close button for accessibility
      setTimeout(() => {
        const closeBtn = modal.querySelector('.casino-info-close');
        if (closeBtn) closeBtn.focus();
      }, 100);
    };
    
    window.closeCasinoInfo = function() {
      const modal = document.getElementById('casino-info-modal');
      modal.style.display = 'none';
      document.removeEventListener('keydown', window.handleCasinoInfoKeydown);
    };
    
    window.handleCasinoInfoKeydown = function(e) {
      if (e.key === 'Escape') {
        window.closeCasinoInfo();
      }
    };
    
    // Close modal when clicking outside of it
    document.addEventListener('click', function(e) {
      const modal = document.getElementById('casino-info-modal');
      if (e.target === modal) {
        window.closeCasinoInfo();
      }
    });

    // --- Browser Notification Support ---
    let notificationsEnabled = false;
    function requestNotificationPermission() {
      if (!("Notification" in window)) return;
      if (Notification.permission === "granted") {
        notificationsEnabled = true;
      } else if (Notification.permission !== "denied") {
        Notification.requestPermission().then(permission => {
          notificationsEnabled = permission === "granted";
        });
      }
    }
    function notifyBonusAvailable(casino) {
      if (notificationsEnabled && "Notification" in window) {
        new Notification(`Bonus available!`, {
          body: `You can collect your bonus at ${casino}.`,
          icon: "/favicon.ico"
        });
      }
    }

    // --- Utility Functions ---
    function parseTimeInput(input) {
      if (!input) return NaN;
      input = input.toLowerCase().replace(/[^0-9hm\s\.\:]/g, '');
      // Accept formats like "2:30" as 2h 30m
      let total = 0;
      const colonMatch = input.match(/(\d+)\s*:\s*(\d+)/);
      if (colonMatch) {
        total += parseInt(colonMatch[1], 10) * 60 + parseInt(colonMatch[2], 10);
        return total;
      }
      const hourMatch = input.match(/(\d+(?:\.\d+)?)\s*h/);
      const minMatch = input.match(/(\d+(?:\.\d+)?)\s*m/);
      if (hourMatch) total += parseFloat(hourMatch[1]) * 60;
      if (minMatch) total += parseFloat(minMatch[1]);
      if (!hourMatch && !minMatch) {
        const num = parseFloat(input);
        if (!isNaN(num)) total += num;
      }
      if (!isFinite(total) || total <= 0) return NaN;
      return Math.round(total);
    }
    function showToast(msg) {
      const toast = document.querySelector('.toast');
      if (!toast) return;
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }
    function showGifPopup() {
      const el = document.getElementById("gif-popup");
      if (!el) return;
      el.innerHTML = `<img src="${gifUrls[Math.floor(Math.random() * gifUrls.length)]}" style="max-height:150px;" alt="Celebration GIF" />`;
      el.style.display = "block";
      confetti();
      setTimeout(() => { el.style.display = "none"; }, 5000);
    }
    function renderCountdown(label, ms) {
      const mins = Math.ceil(ms / 60000);
      const h = Math.floor(mins / 60), m = mins % 60;
      label.innerHTML = `<span class="flip-clock"><span class="digit">${h}</span>h <span class="digit">${m}</span>m</span>`;
      label.classList.remove('available');
      label.classList.add('timer');
    }
    function updateBonusCount() {
      const count = +(localStorage.getItem("collect_count") || 0);
      const el = document.getElementById("bonus-count");
      if (el) {
        el.textContent = `Bonuses Collected: ${count}`;
      }
    }
    function updateTimers() {
      document.querySelectorAll(".table-row").forEach(row => {
        const casino = row.dataset.casino;
        const label = row.querySelector(".last-collected");
        const box = row.querySelector("input");
        const next = localStorage.getItem("casino_" + casino);
        if (next && Date.now() < +next) {
          box.checked = true;
          box.disabled = true;
          renderCountdown(label, next - Date.now());
        } else {
          if (label.textContent !== "Available!") {
            try { uwuSound.play(); } catch {}
            notifyBonusAvailable(casino);
          }
          label.classList.remove('timer');
          label.classList.add('available');
          box.checked = false;
          box.disabled = false;
          label.textContent = "Available!";
        }
      });
    }
    function updateStats() { 
      // Simple stats update - maintains existing functionality
      updateBonusCount();
    }
    function showBonusModal(message) {
      return new Promise((resolve) => {
        const modal = document.getElementById('bonus-modal');
        if (!modal) return resolve(false);
        document.getElementById('bonus-modal-msg').textContent = message;
        modal.style.display = 'flex';
        const yesBtn = document.getElementById('bonus-modal-yes');
        const noBtn = document.getElementById('bonus-modal-no');
        function cleanup(result) {
          modal.style.display = 'none';
          yesBtn.removeEventListener('click', onYes);
          noBtn.removeEventListener('click', onNo);
        }
        function onYes() { cleanup(true); resolve(true); }
        function onNo() { cleanup(false); resolve(false); }
        yesBtn.addEventListener('click', onYes);
        noBtn.addEventListener('click', onNo);
      });
    }
    async function handleBonusClick(name) {
      const row = document.querySelector(`.table-row[data-casino="${name}"]`);
      if (!row) return;
      const box = row.querySelector("input");
      const label = row.querySelector(".last-collected");
      const firstCollectedKey = `casino_first_collected_${name}`;
      const timerKey = `casino_timer_${name}`;
      const alreadyCollected = localStorage.getItem(firstCollectedKey);
      let mins = 1440;
      if (!alreadyCollected) {
        const didCollect = await showBonusModal("Did you collect your bonus?");
        if (!didCollect) return true;
        localStorage.setItem(firstCollectedKey, "1");
        // Only ask the 24hr/timer question the first time
        const is24h = await showBonusModal("Is the next collection in 24 hours?");
        if (!is24h) {
          const input = prompt("How long until the next bonus? (e.g. 5h, 2h 30m, 90m)");
          mins = parseTimeInput(input);
          if (isNaN(mins) || mins <= 0) {
            showToast("Invalid input. Try formats like '5h', '2h 30m', or '90m'.");
            return false;
          }
          localStorage.setItem(timerKey, mins); // store custom timer
        } else {
          localStorage.setItem(timerKey, 1440); // store 24h as default
        }
      } else {
        // Use stored timer value for this casino
        mins = +(localStorage.getItem(timerKey) || 1440);
      }
      const next = Date.now() + mins * 60000;
      localStorage.setItem("casino_" + name, next);
      box.checked = true;
      box.disabled = true;
      // Only increment count on first collection per casino per day
      let count = +(localStorage.getItem("collect_count") || 0);
      if (!alreadyCollected) {
        count++;
        localStorage.setItem("collect_count", count);
        updateBonusCount();
      }
      showToast("Bonus collected!");
      updateStats();
      updateTimers();
      // Show GIF/confetti with 20% chance
      if (Math.random() < 0.2) showGifPopup();
      return true;
    }
    // Toggle mode functionality removed - always use affiliate links
    // --- Search/Filter Logic ---
    let casinoFilter = "";
    let categoryFilter = "all";
    const searchInput = document.getElementById("casino-search");
    const searchClearBtn = document.getElementById("casino-search-clear");
    if (searchInput) {
      searchInput.addEventListener("input", function() {
        casinoFilter = searchInput.value.trim().toLowerCase();
        renderCasinoTable();
        if (searchClearBtn) {
          searchClearBtn.style.display = casinoFilter ? "inline-block" : "none";
        }
      });
      searchInput.addEventListener("keydown", function(e) {
        if (e.key === "Escape") {
          searchInput.value = "";
          casinoFilter = "";
          renderCasinoTable();
          if (searchClearBtn) {
            searchClearBtn.style.display = "none";
          }
        }
      });
    }
    if (searchClearBtn) {
      searchClearBtn.addEventListener("click", function() {
        searchInput.value = "";
        casinoFilter = "";
        renderCasinoTable();
        searchClearBtn.style.display = "none";
        searchInput.focus();
      });
    }
    // --- Keyboard Navigation for Casino Rows ---
    function focusRow(idx) {
      const rows = Array.from(document.querySelectorAll(".table-row"));
      if (rows[idx]) {
        rows[idx].querySelector("a").focus();
      }
    }
    document.addEventListener("keydown", function(e) {
      if (document.activeElement && document.activeElement.closest(".table-row")) {
        const rows = Array.from(document.querySelectorAll(".table-row"));
        const current = rows.findIndex(r => r.contains(document.activeElement));
        if (e.key === "ArrowDown") {
          e.preventDefault();
          focusRow((current + 1) % rows.length);
        } else if (e.key === "ArrowUp") {
          e.preventDefault();
          focusRow((current - 1 + rows.length) % rows.length);
        } else if (e.key === "Tab" && e.shiftKey && current === 0) {
          // Allow shift-tab to wrap to last row
          focusRow(rows.length - 1);
          e.preventDefault();
        }
      }
    });
    // --- Keyboard Navigation for Modal ---
    const bonusModal = document.getElementById('bonus-modal');
    if (bonusModal) {
      bonusModal.addEventListener('keydown', function(e) {
        if (bonusModal.style.display !== 'flex') return;
        if (e.key === "Escape") {
          document.getElementById('bonus-modal-no').click();
        }
        if (e.key === "Tab") {
          // Trap focus inside modal
          const focusables = [document.getElementById('bonus-modal-yes'), document.getElementById('bonus-modal-no')];
          const idx = focusables.indexOf(document.activeElement);
          if (e.shiftKey) {
            if (idx <= 0) {
              focusables[focusables.length - 1].focus();
              e.preventDefault();
            }
          } else {
            if (idx === focusables.length - 1) {
              focusables[0].focus();
              e.preventDefault();
            }
          }
        }
      });
    }
    // --- Smoother Timers with requestAnimationFrame ---
    let lastTimerUpdate = 0;
    function updateTimersRAF(ts) {
      if (!lastTimerUpdate || ts - lastTimerUpdate > 1000) {
        updateTimers();
        lastTimerUpdate = ts;
      }
      requestAnimationFrame(updateTimersRAF);
    }
    // --- Category-based Casino Table Rendering ---
    function renderCasinoTable() {
      const availableContainer = document.getElementById("casino-table-available");
      const cooldownContainer = document.getElementById("casino-table-cooldown");
      if (!availableContainer || !cooldownContainer) return;
      availableContainer.innerHTML = "";
      cooldownContainer.innerHTML = "";
      
      // Always use affiliate links
      let data = window.casinoData || [];
      const now = Date.now();
      
      // Apply search filter
      if (casinoFilter) {
        data = data.filter(c =>
          c.name.toLowerCase().includes(casinoFilter)
        );
      }
      
      // Apply category filter
      if (categoryFilter && categoryFilter !== "all") {
        data = data.filter(c => c.category === categoryFilter);
      }
      
      // Filter out hidden casinos
      data = data.filter(casino => {
        const isHidden = localStorage.getItem("hidden_" + casino.name) === "true";
        return !isHidden;
      });
      
      // Prepare casino data with availability and metadata
      const allCasinos = data.map(casino => {
        const next = localStorage.getItem("casino_" + casino.name);
        const isAvailable = !next || now >= +next;
        const isFavorite = localStorage.getItem("favorite_" + casino.name) === "true";
        const lastUsed = localStorage.getItem("lastused_" + casino.name) || "0";
        
        return {
          ...casino,
          isAvailable,
          isFavorite,
          lastUsed: parseInt(lastUsed, 10),
          next: next ? parseInt(next, 10) : 0
        };
      });
      
      // Separate available and cooldown casinos
      const availableCasinos = allCasinos.filter(c => c.isAvailable);
      const cooldownCasinos = allCasinos.filter(c => !c.isAvailable);
      
      // Sort available casinos: favorites first, then by last used (most recent first), then alphabetical
      availableCasinos.sort((a, b) => {
        if (a.isFavorite !== b.isFavorite) {
          return b.isFavorite - a.isFavorite; // favorites first
        }
        if (a.lastUsed !== b.lastUsed) {
          return b.lastUsed - a.lastUsed; // most recently used first
        }
        return a.name.localeCompare(b.name); // alphabetical fallback
      });
      
      // Sort cooldown casinos by time remaining (most time left first)
      cooldownCasinos.sort((a, b) => (b.next - now) - (a.next - now));
      
      // Define category metadata
      const categoryInfo = {
        crypto: { name: "ü™ô Crypto Casinos", icon: "‚Çø", color: "#f39c12" },
        social: { name: "üé∞ Social Casinos", icon: "üé≤", color: "#3498db" },
        sports: { name: "‚öΩ Sports Betting", icon: "üèà", color: "#e74c3c" },
        vpn: { name: "üåê VPN Required", icon: "üîí", color: "#9b59b6" },
        instant: { name: "‚ö° Instant Payout", icon: "üí®", color: "#27ae60" }
      };
      
      // Render available casinos by category
      if (availableCasinos.length > 0) {
        const header = document.createElement("h2");
        header.textContent = "üíé Available to Collect";
        header.style.cssText = "margin:1.5em 0 1.2em 0;font-size:1.6em;text-align:center;font-family:'Cinzel Decorative', serif;color:var(--bright-silver);text-shadow:0 0 15px rgba(0, 255, 136, 0.6);";
        availableContainer.appendChild(header);
        
        renderCasinosByCategory(availableCasinos, availableContainer, categoryInfo, true);
      } else if (!casinoFilter && categoryFilter === "all") {
        // Show helpful message when no casinos are available
        availableContainer.innerHTML = `
          <div style="text-align:center;padding:3rem 1rem;color:var(--text-secondary);">
            <div style="font-size:3rem;margin-bottom:1rem;">üéâ</div>
            <h3 style="color:var(--primary);margin-bottom:0.5rem;">All bonuses collected!</h3>
            <p>Great job! Check back when timers expire to collect more bonuses.</p>
            <p style="font-size:0.9em;margin-top:1rem;">üí° Tip: Click the help button (?) to learn more features!</p>
          </div>
        `;
      }
      
      // Render cooldown casinos by category
      if (cooldownCasinos.length > 0) {
        const header = document.createElement("h2");
        header.textContent = "‚è≥ On Cooldown";
        header.style.cssText = "margin:2.5em 0 1.2em 0;font-size:1.4em;text-align:center;font-family:'Cinzel Decorative', serif;color:var(--purple-accent);text-shadow:0 0 12px rgba(156, 39, 176, 0.8);";
        cooldownContainer.appendChild(header);
        
        renderCasinosByCategory(cooldownCasinos, cooldownContainer, categoryInfo, false);
      }
      
      // Show/hide sections based on content
      if (casinoFilter) {
        if (availableCasinos.length === 0 && cooldownCasinos.length === 0) {
          availableContainer.innerHTML = "<p style='text-align:center;color:var(--text);margin:2em;'>No casinos match your search.</p>";
          cooldownContainer.style.display = "none";
        } else {
          availableContainer.style.display = availableCasinos.length > 0 ? "" : "none";
          cooldownContainer.style.display = cooldownCasinos.length > 0 ? "" : "none";
        }
      } else {
        availableContainer.style.display = "";
        cooldownContainer.style.display = "";
      }
    }
    
    function renderCasinosByCategory(casinos, container, categoryInfo, isAvailable) {
      // Group casinos by category
      const categorizedCasinos = {};
      
      casinos.forEach(casino => {
        const category = casino.category || 'other';
        if (!categorizedCasinos[category]) {
          categorizedCasinos[category] = [];
        }
        categorizedCasinos[category].push(casino);
      });
      
      // Sort categories by priority: favorites with content first, then by category order
      const categoryOrder = ['crypto', 'social', 'instant', 'sports', 'vpn', 'other'];
      const sortedCategories = Object.keys(categorizedCasinos).sort((a, b) => {
        const aIndex = categoryOrder.indexOf(a);
        const bIndex = categoryOrder.indexOf(b);
        return (aIndex === -1 ? 999 : aIndex) - (bIndex === -1 ? 999 : bIndex);
      });
      
      sortedCategories.forEach(categoryKey => {
        const casinos = categorizedCasinos[categoryKey];
        if (casinos.length === 0) return;
        
        // Sort casinos within category: favorites first, then by last used, then alphabetical
        casinos.sort((a, b) => {
          if (a.isFavorite !== b.isFavorite) {
            return b.isFavorite - a.isFavorite; // favorites first
          }
          if (a.lastUsed !== b.lastUsed) {
            return b.lastUsed - a.lastUsed; // most recently used first
          }
          return a.name.localeCompare(b.name); // alphabetical fallback
        });
        
        const categorySection = createCategorySection(categoryKey, casinos, categoryInfo, isAvailable);
        container.appendChild(categorySection);
      });
    }
    
    function createCategorySection(categoryKey, casinos, categoryInfo, isAvailable) {
      const section = document.createElement("div");
      section.className = `category-section category-${categoryKey}`;
      
      const info = categoryInfo[categoryKey] || { 
        name: categoryKey.charAt(0).toUpperCase() + categoryKey.slice(1), 
        icon: "üé∞", 
        color: "#888" 
      };
      
      // Create header
      const header = document.createElement("div");
      header.className = "category-header";
      header.innerHTML = `
        <h3 class="category-title">
          <span class="category-icon">${info.icon}</span>
          ${info.name}
        </h3>
        <div style="display: flex; align-items: center; gap: 12px;">
          <span class="category-count">${casinos.length}</span>
          <span class="category-toggle">‚ñº</span>
        </div>
      `;
      
      // Create content container
      const content = document.createElement("div");
      content.className = "category-content";
      
      // Add casinos to content
      casinos.forEach(casino => {
        const row = createCasinoRow(casino, isAvailable);
        content.appendChild(row);
      });
      
      // Add click handler for collapse/expand
      header.addEventListener('click', () => {
        section.classList.toggle('collapsed');
        const isCollapsed = section.classList.contains('collapsed');
        localStorage.setItem(`category_${categoryKey}_collapsed`, isCollapsed.toString());
      });
      
      // Restore collapse state
      const isCollapsed = localStorage.getItem(`category_${categoryKey}_collapsed`) === 'true';
      if (isCollapsed) {
        section.classList.add('collapsed');
      }
      
      section.appendChild(header);
      section.appendChild(content);
      
      return section;
    }
    
    function createCasinoRow(casino, isAvailable) {
      const row = document.createElement("div");
      row.className = "table-row";
      row.dataset.casino = casino.name;
      
      // Always use affiliate links (previously "tilted" links)
      const link = casino.tilted;
      const now = Date.now();
      
      // Create timer display
      let timerText;
      if (isAvailable) {
        timerText = "Available!";
      } else {
        const timeLeft = casino.next - now;
        timerText = formatTime(timeLeft);
      }
      
      row.innerHTML = `
        <div class="casino-name">
          <a href="${link}" target="_blank" onclick="return handleCasinoLinkClick(event, '${casino.name}')">${casino.name}</a>
        </div>
        <input type="checkbox" class="collect-checkbox" aria-label="Collected ${casino.name}?" />
        <div class="timer-display ${isAvailable ? 'available' : ''}" onclick="editTimer('${casino.name}')" title="Click to edit timer">${timerText}</div>
      `;
      
      return row;
    }
    
    function formatTime(ms) {
      if (ms <= 0) return "Available!";
      
      const hours = Math.floor(ms / (1000 * 60 * 60));
      const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((ms % (1000 * 60)) / 1000);
      
      if (hours > 0) {
        return `${hours}h ${minutes}m`;
      } else if (minutes > 0) {
        return `${minutes}m ${seconds}s`;
      } else {
        return `${seconds}s`;
      }
    }
    
    function editTimer(casinoName) {
      const currentNext = localStorage.getItem("casino_" + casinoName);
      let currentMinutes = 1440; // Default to 24 hours
      
      if (currentNext) {
        const timeLeft = parseInt(currentNext) - Date.now();
        if (timeLeft > 0) {
          currentMinutes = Math.ceil(timeLeft / 60000);
        }
      }
      
      const input = prompt(`Edit timer for ${casinoName}\n\nEnter time until next collection:\nExamples: "24h", "5h", "2h 30m", "90m"\n\nCurrent: ${Math.floor(currentMinutes / 60)}h ${currentMinutes % 60}m`, `${Math.floor(currentMinutes / 60)}h ${currentMinutes % 60}m`);
      
      if (input === null) return; // User cancelled
      
      const mins = parseTimeInput(input);
      if (isNaN(mins) || mins <= 0) {
        alert("Invalid input. Please use formats like '24h', '5h', '2h 30m', or '90m'.");
        return;
      }
      
      const next = Date.now() + mins * 60000;
      localStorage.setItem("casino_" + casinoName, next);
      localStorage.setItem("casino_timer_" + casinoName, mins);
      renderCasinoTable();
    }
    
    // Make editTimer available globally
    window.editTimer = editTimer;
    
    function parseTimeInput(input) {
      if (!input) return NaN;
      input = input.toLowerCase().trim();
      
      // Match patterns like "5h", "2h 30m", "90m"
      const hourMatch = input.match(/(\d+)\s*h/);
      const minMatch = input.match(/(\d+)\s*m/);
      
      let total = 0;
      if (hourMatch) total += parseInt(hourMatch[1]) * 60;
      if (minMatch) total += parseInt(minMatch[1]);
      
      if (total === 0 && !isNaN(parseInt(input))) {
        total = parseInt(input);
      }
      
      return total > 0 ? total : NaN;
    }
    
    function handleCasinoLinkClick(event, casinoName) {
      // Track last used time for sorting
      localStorage.setItem("lastused_" + casinoName, Date.now().toString());
      return true; // Allow the link to open
    }
    
    function createCategorySection(categoryKey, casinos, categoryInfo, isAvailable) {
      const section = document.createElement("div");
      section.className = `category-section category-${categoryKey}`;
      
      const info = categoryInfo[categoryKey] || { 
        name: categoryKey.charAt(0).toUpperCase() + categoryKey.slice(1), 
        icon: "üé∞", 
        color: "#888" 
      };
      
      // Create header
      const header = document.createElement("div");
      header.className = "category-header";
      header.innerHTML = `
        <h3 class="category-title">
          <span class="category-icon">${info.icon}</span>
          ${info.name}
        </h3>
        <div style="display: flex; align-items: center; gap: 12px;">
          <span class="category-count">${casinos.length}</span>
          <span class="category-toggle">‚ñº</span>
        </div>
      `;
      
      // Create content container
      const content = document.createElement("div");
      content.className = "category-content";
      
      // Add casinos to content
      casinos.forEach(casino => {
        const row = createCasinoRow(casino, isAvailable);
        content.appendChild(row);
      });
      
      // Add click handler for collapse/expand
      header.addEventListener('click', () => {
        section.classList.toggle('collapsed');
        const isCollapsed = section.classList.contains('collapsed');
        localStorage.setItem(`category_${categoryKey}_collapsed`, isCollapsed.toString());
      });
      
      // Restore collapse state
      const isCollapsed = localStorage.getItem(`category_${categoryKey}_collapsed`) === 'true';
      if (isCollapsed) {
        section.classList.add('collapsed');
      }
      
      section.appendChild(header);
      section.appendChild(content);
      
      return section;
    }

    
    const infoBtn = document.getElementById('info-btn');
    const infoPopup = document.getElementById('info-popup');
    if (infoBtn && infoPopup) {
      infoBtn.addEventListener('click', function(e) {
        const isActive = infoBtn.classList.toggle('active');
        infoPopup.style.display = isActive ? 'block' : 'none';
        infoPopup.setAttribute('aria-hidden', !isActive);
        if (isActive) {
          setTimeout(() => {
            document.addEventListener('click', hideInfo, { once: true });
          }, 10);
          infoPopup.focus();
        }
        e.stopPropagation();
      });
      infoBtn.addEventListener('keydown', function(e) {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          infoBtn.click();
        }
      });
      function hideInfo(e) {
        if (!infoBtn.contains(e.target) && !infoPopup.contains(e.target)) {
          infoBtn.classList.remove('active');
          infoPopup.style.display = 'none';
          infoPopup.setAttribute('aria-hidden', 'true');
        }
      }
    }
    
    // --- Admin Panel Functions ---
    function initializeAdminPanel() {
      const adminBtn = document.getElementById("admin-btn");
      const adminPanel = document.getElementById("admin-panel");
      const adminPasswordModal = document.getElementById("admin-password-modal");
      const adminPasswordInput = document.getElementById("admin-password-input");
      const adminPasswordSubmit = document.getElementById("admin-password-submit");
      const adminPasswordCancel = document.getElementById("admin-password-cancel");
      const adminCloseBtn = document.getElementById("admin-close-btn");
      const adminClicksList = document.getElementById("admin-clicks-list");
      
      const ADMIN_PASSWORD = "jmenichole0098";
      
      // Initialize click tracking if not exists
      if (!localStorage.getItem("casinoClickStats")) {
        localStorage.setItem("casinoClickStats", JSON.stringify({}));
      }
      
      // Show password modal
      adminBtn.addEventListener("click", () => {
        adminPasswordModal.style.display = "flex";
        adminPasswordInput.focus();
      });
      
      // Handle password submission
      adminPasswordSubmit.addEventListener("click", () => {
        if (adminPasswordInput.value === ADMIN_PASSWORD) {
          adminPasswordModal.style.display = "none";
          showAdminPanel();
          adminPasswordInput.value = "";
        } else {
          alert("Incorrect password");
          adminPasswordInput.focus();
        }
      });
      
      // Handle password input Enter key
      adminPasswordInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          adminPasswordSubmit.click();
        }
      });
      
      // Cancel password modal
      adminPasswordCancel.addEventListener("click", () => {
        adminPasswordModal.style.display = "none";
        adminPasswordInput.value = "";
      });
      
      // Close admin panel
      adminCloseBtn.addEventListener("click", () => {
        adminPanel.style.display = "none";
      });
      
      // Close modals on outside click
      adminPasswordModal.addEventListener("click", (e) => {
        if (e.target === adminPasswordModal) {
          adminPasswordModal.style.display = "none";
          adminPasswordInput.value = "";
        }
      });
      
      adminPanel.addEventListener("click", (e) => {
        if (e.target === adminPanel) {
          adminPanel.style.display = "none";
        }
      });
      
      function showAdminPanel() {
        updateAdminStats();
        adminPanel.style.display = "flex";
      }
      
      function updateAdminStats() {
        const clickStats = JSON.parse(localStorage.getItem("casinoClickStats") || "{}");
        const totalClicks = Object.values(clickStats).reduce((sum, count) => sum + count, 0);
        
        let statsHtml = `<div style="margin-bottom: 1em; font-weight: bold;">Total Clicks: ${totalClicks}</div>`;
        
        if (Object.keys(clickStats).length === 0) {
          statsHtml += "<p>No click data available yet.</p>";
        } else {
          // Sort by click count descending
          const sortedStats = Object.entries(clickStats)
            .sort(([,a], [,b]) => b - a)
            .map(([casino, clicks]) => `
              <div style="display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #eee;">
                <span>${casino}</span>
                <span style="font-weight: bold;">${clicks} clicks</span>
              </div>
            `).join('');
          
          statsHtml += '<div style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden;">' + sortedStats + '</div>';
        }
        
        adminClicksList.innerHTML = statsHtml;
      }
    }
    
    function trackCasinoClick(casinoName) {
      const clickStats = JSON.parse(localStorage.getItem("casinoClickStats") || "{}");
      clickStats[casinoName] = (clickStats[casinoName] || 0) + 1;
      localStorage.setItem("casinoClickStats", JSON.stringify(clickStats));
    }
    
    // --- Help Modal Functions ---
    function initializeHelpModal() {
      const helpBtn = document.getElementById("help-btn");
      const helpModal = document.getElementById("help-modal");
      const helpCloseBtn = document.getElementById("help-close-btn");
      const helpCloseBtnBottom = document.getElementById("help-close-btn-bottom");
      const exportBtn = document.getElementById("export-data-btn");
      const importBtn = document.getElementById("import-data-btn");
      const clearAllBtn = document.getElementById("clear-all-btn");
      
      // Show help modal
      function showHelpModal() {
        updateHelpStats();
        helpModal.style.display = "flex";
        document.body.style.overflow = "hidden";
      }
      
      // Close help modal
      function closeHelpModal() {
        helpModal.style.display = "none";
        document.body.style.overflow = "";
      }
      
      // Event listeners
      if (helpBtn) helpBtn.addEventListener("click", showHelpModal);
      if (helpCloseBtn) helpCloseBtn.addEventListener("click", closeHelpModal);
      if (helpCloseBtnBottom) helpCloseBtnBottom.addEventListener("click", closeHelpModal);
      
      // Close on outside click
      helpModal.addEventListener("click", (e) => {
        if (e.target === helpModal) closeHelpModal();
      });
      
      // Keyboard shortcut to open help (?)
      document.addEventListener("keydown", (e) => {
        if (e.key === "?" && !e.ctrlKey && !e.metaKey && !e.altKey) {
          const activeElement = document.activeElement;
          if (activeElement.tagName !== "INPUT" && activeElement.tagName !== "TEXTAREA") {
            e.preventDefault();
            showHelpModal();
          }
        }
        // Forward slash to focus search
        if (e.key === "/" && !e.ctrlKey && !e.metaKey && !e.altKey) {
          const activeElement = document.activeElement;
          if (activeElement.tagName !== "INPUT" && activeElement.tagName !== "TEXTAREA") {
            e.preventDefault();
            const searchInput = document.getElementById("casino-search");
            if (searchInput) searchInput.focus();
          }
        }
      });
      
      // Export data functionality
      if (exportBtn) {
        exportBtn.addEventListener("click", () => {
          try {
            const data = {};
            for (let i = 0; i < localStorage.length; i++) {
              const key = localStorage.key(i);
              data[key] = localStorage.getItem(key);
            }
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = `collectclock-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast("Data exported successfully!");
          } catch (err) {
            console.error("Export failed:", err);
            showToast("Export failed. Check console for details.");
          }
        });
      }
      
      // Import data functionality
      if (importBtn) {
        importBtn.addEventListener("click", () => {
          const input = document.createElement("input");
          input.type = "file";
          input.accept = ".json";
          input.onchange = (e) => {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (event) => {
              try {
                const data = JSON.parse(event.target.result);
                if (confirm("This will overwrite your current data. Continue?")) {
                  Object.keys(data).forEach(key => {
                    localStorage.setItem(key, data[key]);
                  });
                  showToast("Data imported successfully! Refreshing...");
                  setTimeout(() => window.location.reload(), 1500);
                }
              } catch (err) {
                console.error("Import failed:", err);
                alert("Invalid file format. Please select a valid CollectClock backup file.");
              }
            };
            reader.readAsText(file);
          };
          input.click();
        });
      }
      
      // Clear all data functionality
      if (clearAllBtn) {
        clearAllBtn.addEventListener("click", () => {
          if (confirm("‚ö†Ô∏è This will delete ALL your data including timers, collections, and settings. This cannot be undone!\n\nAre you absolutely sure?")) {
            if (confirm("Final confirmation: Delete everything?")) {
              localStorage.clear();
              showToast("All data cleared. Refreshing...");
              setTimeout(() => window.location.reload(), 1500);
            }
          }
        });
      }
      
      // Check if first visit and show help
      if (!localStorage.getItem("hasVisited")) {
        setTimeout(() => {
          showHelpModal();
          localStorage.setItem("hasVisited", "true");
        }, 1000);
      }
      
      // Refresh stats button
      const refreshBtn = document.getElementById("refresh-stats-btn");
      if (refreshBtn) {
        refreshBtn.addEventListener("click", () => {
          updateTimers();
          updateStats();
          updateBonusCount();
          renderCasinoTable();
          showToast("Stats refreshed!");
        });
      }
      
      // Category filter buttons
      const categoryFilterBtns = document.querySelectorAll(".category-filter-btn");
      categoryFilterBtns.forEach(btn => {
        btn.addEventListener("click", () => {
          categoryFilter = btn.dataset.category;
          // Update active state
          categoryFilterBtns.forEach(b => {
            b.classList.remove("active");
            b.style.background = "var(--card-bg)";
            b.style.color = "var(--text)";
          });
          btn.classList.add("active");
          btn.style.background = "var(--accent)";
          btn.style.color = "#fff";
          renderCasinoTable();
        });
      });
    }
    
    function updateHelpStats() {
      const totalCollections = +(localStorage.getItem("collect_count") || 0);
      const now = Date.now();
      let availableCount = 0;
      let cooldownCount = 0;
      
      window.casinoData.forEach(casino => {
        const next = localStorage.getItem("casino_" + casino.name);
        const isHidden = localStorage.getItem("hidden_" + casino.name) === "true";
        if (!isHidden) {
          if (!next || now >= +next) {
            availableCount++;
          } else {
            cooldownCount++;
          }
        }
      });
      
      const totalCollectionsEl = document.getElementById("total-collections");
      const availableNowEl = document.getElementById("available-now");
      const onCooldownEl = document.getElementById("on-cooldown");
      
      if (totalCollectionsEl) totalCollectionsEl.textContent = totalCollections;
      if (availableNowEl) availableNowEl.textContent = availableCount;
      if (onCooldownEl) onCooldownEl.textContent = cooldownCount;
    }
    
    // --- Startup ---
    document.addEventListener("DOMContentLoaded", function() {
      const modeToggle = document.getElementById("mode-toggle");
      if (modeToggle) modeToggle.addEventListener("click", toggleMode);
      initializeAdminPanel(); // Initialize admin panel
      initializeHelpModal(); // Initialize help modal and features
      renderCasinoTable();
      updateTimers();
      updateStats();
      updateBonusCount();
      // Theme system removed - always use consistent styling
      // Request notification permission
      requestNotificationPermission();
      // Focus search bar on load for accessibility
      if (searchInput) searchInput.setAttribute("tabindex", "0");
    });
    // --- Timers update ---
    requestAnimationFrame(updateTimersRAF);
  })();
  </script>
</body>
</html>
