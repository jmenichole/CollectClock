<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>🎰 Tilted, baby</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  
  <style>
    :root {
      /* Enhanced Dark Theme - Modern Casino Aesthetic */
      --bg: #0f0f0f;
      --text: #f4d03f;
      --link: #ffd700;
      --link-hover: #ff6b6b;
      --timer: #e55039;
      --hover-bg: #1a1a1a;
      --border: #333;
      --success: #f39c12;
      --accent: #e74c3c;
      --category-bg: #1a1a1a;
      --category-border: #444;
      --category-hover: #222;
      --silver: #bdc3c7;
      --dark-silver: #95a5a6;
      --gold-bright: #f1c40f;
      --gold-dark: #d4af37;
      --red-bright: #ff4757;
      --red-dark: #c0392b;
      
      /* Category-specific colors */
      --crypto-accent: #f7931a;
      --social-accent: #e74c3c;
      --sports-accent: #3498db;
      --vpn-accent: #9b59b6;
      --instant-accent: #2ecc71;
    }
    .light-mode {
      /* Enhanced Light Theme - Clean Professional Look */
      --bg: #ffffff;
      --text: #2c3e50;
      --link: #2980b9;
      --link-hover: #e74c3c;
      --timer: #e67e22;
      --hover-bg: #f8f9fa;
      --border: #dee2e6;
      --success: #27ae60;
      --accent: #3498db;
      --category-bg: #f8f9fa;
      --category-border: #e9ecef;
      --category-hover: #e9ecef;
      --silver: #95a5a6;
      --dark-silver: #7f8c8d;
      --gold-bright: #f39c12;
      --gold-dark: #e67e22;
      --red-bright: #e74c3c;
      --red-dark: #c0392b;
      
      /* Category-specific colors */
      --crypto-accent: #f7931a;
      --social-accent: #e74c3c;
      --sports-accent: #3498db;
      --vpn-accent: #8e44ad;
      --instant-accent: #27ae60;
    }
    body {
      font-family: 'Orbitron', 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 25%, #2d2d2d 50%, #1a1a1a 75%, #000000 100%);
      color: var(--text);
      margin: 0;
      min-height: 100vh;
      transition: all 0.3s ease-in-out;
      /* Clean black and gold gradient background */
      background-size: 100% 100%;
      background-attachment: fixed;
    }
    .light-mode body {
      /* Clean white and gold gradient for light mode */
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 25%, #e9ecef 50%, #f8f9fa 75%, #ffffff 100%);
      background-size: 100% 100%;
      background-attachment: fixed;
    }
    .container { 
      max-width: 800px; 
      margin: auto; 
      padding: 2rem;
      background: linear-gradient(135deg, rgba(212, 175, 55, 0.06) 0%, rgba(189, 195, 199, 0.04) 50%, rgba(192, 57, 43, 0.06) 100%);
      border: 2px solid var(--gold-dark);
      border-radius: 20px;
      margin-top: 2rem;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.4), 
        0 0 60px rgba(212, 175, 55, 0.15),
        inset 0 1px 0 rgba(189, 195, 199, 0.2),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(15px);
      position: relative;
    }
    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 18px;
      padding: 2px;
      background: linear-gradient(45deg, var(--silver), var(--gold-bright), var(--red-bright), var(--gold-dark));
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
      opacity: 0.6;
    }
    .light-mode .container {
      background: linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(149, 165, 166, 0.06) 50%, rgba(231, 76, 60, 0.08) 100%);
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.15), 
        0 0 60px rgba(212, 175, 55, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.4),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
      border: 2px solid var(--gold-dark);
    }
    h1 { 
      text-align: center; 
      font-size: 2.4em; 
      margin-bottom: 1.2em;
      font-weight: 700;
      letter-spacing: -0.01em;
      color: var(--gold-bright);
      background: linear-gradient(135deg, var(--gold-bright), var(--silver), var(--gold-dark));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      /* Subtle animation instead of glitch */
      animation: subtleGlow 3s ease-in-out infinite; 
      /* Reduced text shadow for better readability */
      text-shadow: 
        0 0 3px rgba(241, 196, 15, 0.4), 
        0 2px 4px rgba(0, 0, 0, 0.5);
      position: relative;
    }
    h1::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, var(--gold-bright), var(--red-bright), var(--silver));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      opacity: 0;
      animation: titleFlash 6s infinite;
      z-index: -1;
    }
    .light-mode h1 { 
      animation: subtleGlow 3s ease-in-out infinite;
      text-shadow: 
        0 0 2px rgba(212, 175, 55, 0.3), 
        0 2px 4px rgba(0, 0, 0, 0.2);
      font-weight: 700;
    }
    .toggle-mode {
      padding: 16px 36px;
      background: linear-gradient(135deg, var(--red-bright) 0%, var(--gold-bright) 25%, var(--silver) 50%, var(--gold-dark) 75%, var(--red-dark) 100%);
      color: white; 
      border: 2px solid var(--gold-bright);
      border-radius: 15px;
      cursor: pointer; 
      font-size: 1.2em; 
      font-weight: 700;
      display: block; 
      margin: 0 auto 1.5em;
      transition: all 0.4s ease;
      box-shadow: 
        0 6px 20px rgba(192, 57, 43, 0.4), 
        0 0 30px rgba(241, 196, 15, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2);
      text-shadow: 
        0 0 12px rgba(255, 255, 255, 0.9), 
        0 2px 4px rgba(0, 0, 0, 0.8);
      position: relative;
      overflow: hidden;
    }
    .toggle-mode::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: rotate(45deg);
      transition: all 0.6s ease;
      opacity: 0;
    }
    .toggle-mode:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 
        0 12px 40px rgba(192, 57, 43, 0.6), 
        0 0 50px rgba(241, 196, 15, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      text-shadow: 
        0 0 20px rgba(255, 255, 255, 1), 
        0 2px 4px rgba(0, 0, 0, 0.9);
      border-color: var(--silver);
    }
    .toggle-mode:hover::before {
      opacity: 1;
      animation: shine 1.2s ease-in-out;
    }
    @keyframes shine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }
    .light-mode .toggle-mode {
      background: linear-gradient(135deg, var(--gold-dark) 0%, var(--silver) 25%, var(--red-bright) 50%, var(--gold-bright) 75%, var(--dark-silver) 100%);
      box-shadow: 
        0 6px 20px rgba(149, 165, 166, 0.4), 
        0 0 25px rgba(212, 175, 55, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
    }
    .light-mode .toggle-mode:hover {
      box-shadow: 
        0 12px 32px rgba(149, 165, 166, 0.5), 
        0 0 35px rgba(212, 175, 55, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7);
    }
    .table-row {
      display: grid; 
      grid-template-columns: 2fr 1fr 2fr;
      gap: 12px; 
      padding: 18px; 
      margin: 0.8em 0;
      border-radius: 15px; 
      background: linear-gradient(135deg, rgba(28, 28, 28, 0.8) 0%, rgba(44, 44, 44, 0.6) 100%);
      border: 1px solid var(--gold-dark);
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.3),
        0 0 25px rgba(212, 175, 55, 0.1),
        inset 0 1px 0 rgba(189, 195, 199, 0.1);
      min-height: 68px;
      align-items: center;
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }
    .table-row::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(241, 196, 15, 0.1), transparent);
      transition: left 0.6s ease;
    }
    .table-row:hover { 
      background: linear-gradient(135deg, var(--red-dark) 0%, var(--gold-dark) 50%, var(--red-bright) 100%);
      color: #fff; 
      transform: translateY(-3px) scale(1.01);
      box-shadow: 
        0 12px 30px rgba(192, 57, 43, 0.4), 
        0 0 40px rgba(241, 196, 15, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      border-color: var(--silver);
    }
    .table-row:hover::before {
      left: 100%;
    }
    .light-mode .table-row {
      background: linear-gradient(135deg, rgba(236, 240, 241, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
      border: 1px solid var(--silver);
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.1),
        0 0 25px rgba(212, 175, 55, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.5);
    }
    .light-mode .table-row:hover { 
      background: linear-gradient(135deg, var(--gold-dark) 0%, var(--red-bright) 50%, var(--gold-bright) 100%);
      color: #fff; 
      box-shadow: 
        0 12px 30px rgba(212, 175, 55, 0.4), 
        0 0 40px rgba(231, 76, 60, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: var(--dark-silver);
    }
    /* Premium Casino-style link effects */
    .table-row a {
      color: var(--gold-bright);
      text-decoration: none;
      font-weight: 700;
      padding: 0.6em 1.2em;
      border-radius: 10px;
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, rgba(241, 196, 15, 0.1), rgba(189, 195, 199, 0.05));
      border: 1px solid rgba(212, 175, 55, 0.3);
      text-shadow: 0 0 8px rgba(241, 196, 15, 0.6);
    }
    .table-row a::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s ease;
    }
    .table-row a:hover {
      color: #fff;
      background: linear-gradient(135deg, var(--gold-bright), var(--red-bright));
      border-color: var(--silver);
      text-shadow: 
        0 0 15px rgba(255, 255, 255, 0.9),
        0 2px 4px rgba(0, 0, 0, 0.7);
      transform: scale(1.05);
    }
    .table-row a:hover::before {
      left: 100%;
    }
    .light-mode .table-row a {
      color: var(--gold-dark);
      background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(149, 165, 166, 0.05));
      border-color: rgba(212, 175, 55, 0.4);
      text-shadow: 0 0 6px rgba(212, 175, 55, 0.5);
    }
    .light-mode .table-row a:hover {
      background: linear-gradient(135deg, var(--gold-dark), var(--red-bright));
      text-shadow: 
        0 0 12px rgba(255, 255, 255, 0.8),
        0 1px 3px rgba(0, 0, 0, 0.6);
    }
    
    /* Category Section Styling */
    .category-section {
      margin: 2em 0;
      background: var(--category-bg);
      border: 1px solid var(--category-border);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .category-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.5rem;
      background: linear-gradient(135deg, var(--category-bg) 0%, var(--category-hover) 100%);
      border-bottom: 1px solid var(--category-border);
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }
    
    .category-header:hover {
      background: linear-gradient(135deg, var(--category-hover) 0%, var(--hover-bg) 100%);
    }
    
    .category-title {
      font-size: 1.2em;
      font-weight: 600;
      color: var(--text);
      margin: 0;
      display: flex;
      align-items: center;
      gap: 0.5em;
    }
    
    .category-count {
      background: var(--accent);
      color: white;
      padding: 0.2em 0.6em;
      border-radius: 20px;
      font-size: 0.8em;
      font-weight: bold;
      min-width: 1.5em;
      text-align: center;
    }
    
    .category-toggle {
      font-size: 1.2em;
      transition: transform 0.3s ease;
      color: var(--text);
    }
    
    .category-section.collapsed .category-toggle {
      transform: rotate(-90deg);
    }
    
    .category-content {
      padding: 0;
      max-height: 2000px;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.3s ease;
    }
    
    .category-section.collapsed .category-content {
      max-height: 0;
      padding: 0;
    }
    
    /* Category-specific accent colors */
    .category-crypto .category-title { color: var(--crypto-accent); }
    .category-social .category-title { color: var(--social-accent); }
    .category-sports .category-title { color: var(--sports-accent); }
    .category-vpn .category-title { color: var(--vpn-accent); }
    .category-instant .category-title { color: var(--instant-accent); }
    
    
    .last-collected.available {
      animation: subtlePulse 3s infinite;
      text-shadow: 0 0 2px #000, 0 0 4px #000;
      font-weight: 700;
      color: var(--gold-bright);
    }
    .last-collected.timer {
      animation: subtlePulseRed 3s infinite;
      text-shadow: 0 0 2px #000, 0 0 4px #000;
      font-weight: 700;
      color: var(--red-bright);
    }
    @keyframes subtlePulseRed {
      0%,100% { 
        color: var(--red-bright); 
        text-shadow: 
          0 0 3px var(--red-bright), 
          0 0 2px #000; 
      }
      50% { 
        color: var(--red-dark); 
        text-shadow: 
          0 0 4px var(--red-dark), 
          0 0 2px #000; 
      }
    }
    @keyframes subtlePulse {
      0%,100% { 
        color: var(--gold-bright); 
        text-shadow: 
          0 0 3px var(--gold-bright), 
          0 0 2px #000; 
      }
      50% { 
        color: var(--gold-dark); 
        text-shadow: 
          0 0 4px var(--gold-dark), 
          0 0 2px #000; 
      }
    }
    .light-mode .last-collected.available {
      text-shadow: 
        0 0 2px var(--gold-dark), 
        0 1px 2px rgba(0, 0, 0, 0.2);
      color: var(--gold-dark);
    }
    .light-mode .last-collected.timer {
      text-shadow: 
        0 0 2px var(--red-bright), 
        0 1px 2px rgba(0, 0, 0, 0.2);
      color: var(--red-bright);
    }
    @keyframes glitch {
      0% { transform: none; }
      20% { transform: translate(-1px, 1px); }
      40% { transform: translate(1px, -1px); }
      60% { transform: translate(-1px, -1px); }
      80% { transform: translate(1px, 1px); }
      100% { transform: none; }
    }
    /* Subtle Animation Effects */
    @keyframes subtleGlow {
      0%, 100% { 
        text-shadow: 
          0 0 3px rgba(241, 196, 15, 0.4), 
          0 2px 4px rgba(0, 0, 0, 0.5);
      }
      50% { 
        text-shadow: 
          0 0 5px rgba(241, 196, 15, 0.6), 
          0 2px 4px rgba(0, 0, 0, 0.5);
      }
    }
    @keyframes goldShimmer {
      0%, 100% { 
        text-shadow: 
          0 0 8px var(--gold-bright), 
          0 0 15px var(--gold-dark), 
          0 0 25px var(--silver),
          0 3px 6px rgba(0, 0, 0, 0.8);
        transform: scale(1);
      }
      25% { 
        text-shadow: 
          0 0 15px var(--silver), 
          0 0 25px var(--gold-bright), 
          0 0 35px var(--red-bright),
          0 3px 6px rgba(0, 0, 0, 0.9);
        transform: scale(1.01);
      }
      50% { 
        text-shadow: 
          0 0 12px var(--red-bright), 
          0 0 22px var(--gold-bright), 
          0 0 32px var(--silver),
          0 3px 6px rgba(0, 0, 0, 0.8);
        transform: scale(1.02);
      }
      75% { 
        text-shadow: 
          0 0 10px var(--gold-dark), 
          0 0 20px var(--silver), 
          0 0 30px var(--gold-bright),
          0 3px 6px rgba(0, 0, 0, 0.9);
        transform: scale(1.01);
      }
    }
    @keyframes titleFlash {
      0%, 95%, 100% { opacity: 0; }
      96%, 99% { opacity: 0.3; }
    }
    @keyframes subtleSparkle {
      0%, 70%, 100% { opacity: 0.3; transform: translateY(-50%) scale(0.8); }
      35% { opacity: 0.8; transform: translateY(-50%) scale(1); }
    }
    /* Add subtle sparkle effects to available bonuses */
    .last-collected.available {
      position: relative;
      animation: subtlePulse 3s infinite;
    }
    .last-collected.available::after {
      content: '✨';
      position: absolute;
      right: -25px;
      top: 50%;
      transform: translateY(-50%);
      animation: subtleSparkle 4s infinite;
      font-size: 0.8em;
      opacity: 0.7;
    }
    .last-collected.available::before {
      content: '💎';
      position: absolute;
      left: -25px;
      top: 50%;
      transform: translateY(-50%);
      animation: subtleSparkle 5s infinite reverse;
      font-size: 0.6em;
      opacity: 0.7;
    }
    footer {
      text-align: center; 
      margin-top: 3em; 
      padding: 2.5em 0;
      font-size: 0.95em; 
      background: linear-gradient(135deg, rgba(28, 28, 28, 0.9) 0%, rgba(44, 44, 44, 0.8) 100%);
      border-top: 2px solid var(--gold-dark);
      backdrop-filter: blur(15px);
      box-shadow: 
        0 -4px 20px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(189, 195, 199, 0.1);
    }
    footer a { 
      color: var(--gold-bright); 
      text-decoration: none;
      font-weight: 600;
      transition: all 0.4s ease;
      text-shadow: 0 0 8px rgba(241, 196, 15, 0.6);
      padding: 0.3em 0.6em;
      border-radius: 8px;
      background: linear-gradient(135deg, rgba(241, 196, 15, 0.1), rgba(189, 195, 199, 0.05));
    }
    footer a:hover { 
      color: var(--silver); 
      text-shadow: 
        0 0 15px rgba(189, 195, 199, 0.9),
        0 0 25px rgba(241, 196, 15, 0.6);
      background: linear-gradient(135deg, rgba(189, 195, 199, 0.2), rgba(241, 196, 15, 0.1));
      transform: translateY(-2px);
    }
    .light-mode footer a:hover {
      text-shadow: 
        0 0 12px rgba(149, 165, 166, 0.8),
        0 0 20px rgba(212, 175, 55, 0.6);
    }
    .profile-pic {
      width: 36px; height: 36px; border-radius: 50%; object-fit: cover;
      border: 2px solid #5865F2; box-shadow: 0 1px 4px #5865F299;
    }
    .tooltip .tooltiptext {
      visibility: hidden; width: max-content; background-color: #222;
      color: #fff; text-align: center; border-radius: 6px; padding: 5px 10px;
      position: absolute; z-index: 1; bottom: 125%; left: 50%;
      transform: translateX(-50%); opacity: 0; transition: opacity 0.3s;
    }
    .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
    .toast {
      position: fixed; bottom: 1em; left: 50%; transform: translateX(-50%);
      background: #000; color: #fff; padding: 10px 20px; border-radius: 10px;
      opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
    }
    .toast.show { opacity: 1; }
    .toggle-row {
      display: flex; flex-direction: column; align-items: center;
      justify-content: center; gap: 0.7em; margin-bottom: 1em; flex-wrap: wrap;
    }
    .info-btn {
      background: none; border: none; color: #5865F2; font-size: 1.3em;
      cursor: pointer; padding: 0 0.2em; border-radius: 50%;
      transition: background 0.2s; display: flex; align-items: center; justify-content: center;
    }
    .info-btn:active, .info-btn.active { background: #e0e7ff; }
    .info-popup {
      position: fixed; top: 60px; left: 50%; transform: translateX(-50%);
      background: #fff; color: #222; border-radius: 12px;
      box-shadow: 0 4px 24px rgba(34,34,59,0.12);
      padding: 1.2em 1.5em; z-index: 2000; font-size: 1.1em;
      max-width: 90vw; min-width: 220px; text-align: center; display: none;
    }
    .search-bar {
      width: 100%;
      max-width: 400px;
      margin: 0 auto 1em auto;
      display: flex;
      align-items: center;
      gap: 0.5em;
    }
    .search-bar input[type="search"] {
      flex: 1;
      padding: 0.8em 1.2em;
      font-size: 1.1em;
      border-radius: 10px;
      border: 2px solid var(--border);
      background: var(--bg);
      color: var(--text);
      outline: none;
      transition: all 0.3s ease;
    }
    .search-bar input[type="search"]:focus {
      border: 2px solid var(--accent);
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
    }
    .light-mode .search-bar input[type="search"]:focus {
      border: 2px solid var(--accent);
      box-shadow: 0 0 12px rgba(255, 0, 128, 0.3);
    }
    .search-bar button {
      padding: 0.8em 1.4em;
      border-radius: 10px;
      border: none;
      background: var(--accent);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      font-size: 1.1em;
      transition: all 0.3s ease;
    }
    .search-bar button:hover {
      background: var(--link-hover);
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(185, 28, 28, 0.4), 0 0 20px rgba(251, 191, 36, 0.2);
    }
    .light-mode .search-bar button:hover {
      box-shadow: 0 4px 16px rgba(220, 38, 38, 0.5), 0 0 25px rgba(251, 191, 36, 0.3);
      text-shadow: 0 0 8px rgba(251, 191, 36, 0.8);
    }
    @media (max-width: 600px) {
      .container { padding: 0.5em; }
      .toggle-row { flex-direction: column; gap: 0.7em; }
      .info-popup { top: 90px; font-size: 1em; padding: 1em; }
      h1 { font-size: 1.2em; }
      .table-row { font-size: 0.98em; }
      .profile-pic { width: 28px; height: 28px; }
      .table-row a {
        font-size: 1.05em;
        min-width: 90px;
        padding: 0.7em 0.2em;
      }
      .table-row input[type="checkbox"] {
        width: 2.5em;
        height: 2.5em;
      }
    }
  </style>
</head>
<body>


  <div class="container">
    <div id="user-info" style="display:flex;align-items:center;gap:12px;justify-content:center;margin-bottom:1em;"></div>
    <h1>Degen mode activated. Don't forget the juice ⚡</h1>
    <a id="discord-login-btn" class="login-btn" href="#" style="display:inline-block;margin:0 auto 1em auto;padding:10px 20px;background:#5865F2;color:#fff;border-radius:8px;text-decoration:none;font-weight:bold;">Login with Discord</a>
    <div class="toggle-row">
      <button id="mode-toggle" class="toggle-mode">Untilt</button>
      <button id="info-btn" class="info-btn" aria-label="Info" tabindex="0">ⓘ</button>
    </div>
    <div id="info-popup" class="info-popup" role="dialog" aria-modal="true" aria-hidden="true">Switch between raw and referral links.<br>Tilt Mode supports dev, Untilt is mod-safe.</div>
    <form class="search-bar" id="casino-search-form" autocomplete="off" onsubmit="return false;">
      <input type="search" id="casino-search" placeholder="Search casinos..." aria-label="Search casinos" />
      <button type="button" id="casino-search-clear" aria-label="Clear search" tabindex="0" style="display:none;">✕</button>
    </form>
    <div id="casino-table-available"></div>
    <div id="casino-table-cooldown" style="margin-top:2.5em;"></div>
    <div class="cta-premium" style="text-align:center;margin:1.5em 0 1em 0;"></div>
    <div id="bonus-count" style="text-align:right;font-size:1.1em;font-weight:bold;margin-bottom:0.5em;"></div>
  </div>
  <footer>
    <div id="footer-info" style="margin-bottom:1.2em;">
      made for degens by degens ❤️<br/>
      💡 Suggest a casino? <a href="https://discord.gg/3hmXPwwa" target="_blank" rel="noopener">Drop it in Discord</a><br/>
      ☕ Powered by <a href="https://ko-fi.com/jmenichole0" target="_blank" rel="noopener">Ko-fi</a>
    </div>
   
    <button id="reset-timers-btn" style="position:absolute;right:18px;bottom:18px;padding:7px 18px;font-size:0.98em;border-radius:8px;background:#e0e7ef;color:#333;border:none;box-shadow:0 2px 8px #0001;opacity:0.7;transition:opacity 0.2s;z-index:10000;cursor:pointer;outline:none;min-width:120px;" title="Reset all casino timers">Reset All Timers</button>
  </footer>
  <style>
    @media (max-width: 600px) {
      #reset-timers-btn {
        right: 10px;
        bottom: 10px;
        font-size: 0.92em;
        min-width: 90px;
        padding: 6px 10px;
      }
    }
    #reset-timers-btn:hover, #reset-timers-btn:focus {
      opacity: 1;
      background: #ffe0e7;
      color: #e91e63;
    }
    </style>
  <div class="toast" aria-live="polite"></div>
  <div id="gif-popup" style="display:none;"></div>
  <div id="bonus-modal" style="display:none;position:fixed;z-index:3000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.45);align-items:center;justify-content:center;">
    <div style="background:#fff;color:#222;padding:2em 1.5em;border-radius:16px;box-shadow:0 4px 24px #000a;max-width:90vw;text-align:center;">
      <div id="bonus-modal-msg" style="font-size:1.15em;margin-bottom:1.2em;"></div>
      <button id="bonus-modal-yes" style="padding:10px 28px;margin:0 1em 0 0;background:#2cb67d;color:#fff;border:none;border-radius:8px;font-size:1em;font-weight:bold;cursor:pointer;">Yes</button>
      <button id="bonus-modal-no" style="padding:10px 28px;background:#e91e63;color:#fff;border:none;border-radius:8px;font-size:1em;font-weight:bold;cursor:pointer;">No</button>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
  (function() {
    // --- Sound asset URLs (using local files) ---
    const tiltSound = new Audio("798635__cvltiv8r__cvlt-bass-94.wav");
    const untiltSound = new Audio("810164__mokasza__awesome-bubble-pop.mp3");
    const uwuSound = new Audio("800976__sadiquecat__other-uwu-2.wav");

    // --- Discord OAuth ---
    const DISCORD_CLIENT_ID = "1336968746450812928";
    const discordLoginBtn = document.getElementById('discord-login-btn');
    const userInfoDiv = document.getElementById('user-info');
    function renderUserInfo() {
      const user = JSON.parse(localStorage.getItem("discordUser") || "{}");
      userInfoDiv.innerHTML = "";
      if (user && user.username) {
        let avatarUrl = user.avatar
          ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`
          : `https://cdn.discordapp.com/embed/avatars/${(user.discriminator % 5)}.png`;
        userInfoDiv.innerHTML = `<img src="${avatarUrl}" class="profile-pic" alt="Profile" /> <span style='font-weight:bold;'>${user.username}#${user.discriminator}</span>`;
        if (discordLoginBtn) discordLoginBtn.style.display = "none";
      } else {
        if (discordLoginBtn) discordLoginBtn.style.display = "inline-block";
      }
    }
    if (discordLoginBtn && DISCORD_CLIENT_ID) {
      const redirect = encodeURIComponent(window.location.origin + window.location.pathname.replace(/\/[^/]*$/, '/auth.html'));
      discordLoginBtn.href = `https://discord.com/oauth2/authorize?client_id=${DISCORD_CLIENT_ID}&redirect_uri=${redirect}&response_type=token&scope=identify`;
    }
    renderUserInfo();
    window.addEventListener('storage', function(e) {
      if (e.key === 'discordUser') renderUserInfo();
    });

    const gifUrls = [
      "https://media.giphy.com/media/3o6Zt6ML6BklcajjsA/giphy.gif",
      "https://media.giphy.com/media/l0HUpt2s9Pclgt9Vm/giphy.gif",
      "https://media.giphy.com/media/3ohc1bTn4ZDEd4nSSA/giphy.gif"
    ];
    window.casinoData = [
      // 🪙 Crypto Casinos
      { name: "TrustDice", tilted: "https://trustdice.win/faucet/?ref=u_jmenichole", clean: "https://trustdice.win", category: "crypto" },
      { name: "Stake US", tilted: "https://stake.us/?c=Jmenichole", clean: "https://stake.us", category: "crypto" },
      { name: "Bitsler", tilted: "https://www.bitsler.io/?ref=jmenichole", clean: "https://www.bitsler.io", category: "crypto" },
      { name: "Rolla", tilted: "https://www.rolla.com/?raf=3873", clean: "https://www.rolla.com", category: "crypto" },
      { name: "Punt", tilted: "https://punt.com/c/cg60pd", clean: "https://punt.com", category: "crypto" },
      
      // ⚡ Instant Cashout
      { name: "WowVegas", tilted: "https://www.wowvegas.com/?raf=3615494", clean: "https://www.wowvegas.com", category: "instant" },
      { name: "Pulsz", tilted: "https://www.pulsz.com/?invited_by=utfk4r", clean: "https://www.pulsz.com", category: "instant" },
      { name: "Modo", tilted: "https://modo.us?referralCode=61MN6A", clean: "https://modo.us", category: "instant" },
      { name: "McLuck", tilted: "https://www.mcluck.com/lp/raf?r=61119407%2F908900038", clean: "https://www.mcluck.com", category: "instant" },
      { name: "Crown Coins", tilted: "https://crowncoinscasino.com/", clean: "https://crowncoinscasino.com", category: "instant" },
      { name: "Chanced", tilted: "https://chanced.com/c/ysa096", clean: "https://chanced.com", category: "instant" },
      { name: "Pulsz Bingo", tilted: "https://www.pulszbingo.com/?invited_by=eg6mbf", clean: "https://www.pulszbingo.com", category: "instant" },
      { name: "Zula Casino", tilted: "https://www.zulacasino.com/signup/221ddd92-862e-45d8-acc0-4cd2c26f7cdd", clean: "https://www.zulacasino.com", category: "instant" },
      { name: "Fortune Coins", tilted: "https://www.fortunecoins.com/signup/3c08936f-8979-4f87-b377-efdbff519029", clean: "https://www.fortunecoins.com", category: "instant" },
      { name: "High 5 Casino", tilted: "https://high5casino.com/gc?adId=INV001%3AJmenichole", clean: "https://high5casino.com", category: "instant" },
      
      // 🏆 Sports Betting
      { name: "Sportzino", tilted: "https://sportzino.com/signup/8a105ba6-7ada-45c8-b021-f478ac03c7c4", clean: "https://sportzino.com", category: "sports" },
      { name: "Slips", tilted: "https://slips.com/invite?code=6901", clean: "https://slips.com", category: "sports" },
      { name: "PrizePicks", tilted: "https://app.prizepicks.com/sign-up?invite_code=PR-N0MTQX8&source=iosShare", clean: "https://app.prizepicks.com", category: "sports" },
      { name: "Dabble", tilted: "https://click.dabble.com/GaFA/js1v7hqv", clean: "https://dabble.com", category: "sports" },
      
      // 🌐 VPN Required
      { name: "Gamba VPN", tilted: "https://gamba.com?c=Jme", clean: "https://gamba.com", category: "vpn" },
      { name: "Goated VPN", tilted: "https://www.goated.com/r/YDRZLJ", clean: "https://www.goated.com", category: "vpn" },
      { name: "JungleBet VPN", tilted: "https://junglebet.com/r/jmenichole", clean: "https://junglebet.com", category: "vpn" },
      { name: "Shuffle.com VPN", tilted: "https://shuffle.com?r=jHR7JnWRPF", clean: "https://shuffle.com", category: "vpn" },
      { name: "Stake.com VPN", tilted: "https://www.stake.com/?c=LAYP68hb", clean: "https://www.stake.com", category: "vpn" },
      
      // 🎰 Social Casinos
      { name: "MetaWin", tilted: "https://metawin.com/jmenichole007/", clean: "https://metawin.com", category: "social" },
      { name: "SpinBlitz", tilted: "https://www.spinblitz.com/lp/raf?r=606f64a3%2F1246446739", clean: "https://www.spinblitz.com", category: "social" },
      { name: "Hello Millions", tilted: "https://www.hellomillions.com/lp/raf?r=26d6760f%2F1236643867", clean: "https://www.hellomillions.com", category: "social" },
      { name: "Mega Bonanza", tilted: "https://www.megabonanza.com/?r=72781897", clean: "https://www.megabonanza.com", category: "social" },
      { name: "Real Prize", tilted: "https://www.realprize.com/refer/317136", clean: "https://www.realprize.com", category: "social" },
      { name: "LuckyBird", tilted: "https://luckybird.vip/?c=c_jmenichole", clean: "https://luckybird.vip", category: "social" },
      { name: "PlayFame", tilted: "https://www.playfame.com/lp/raf?r=1275975417", clean: "https://www.playfame.com", category: "social" },
      { name: "Jackpota", tilted: "https://www.jackpota.com/?r=85453282", clean: "https://www.jackpota.com", category: "social" },
      { name: "MyPrize", tilted: "https://myprize.us/invite/jmenichole", clean: "https://myprize.us", category: "social" },
      { name: "Winna", tilted: "https://winna.com/?r=jmenichole", clean: "https://winna.com", category: "social" },
      { name: "Club Poker", tilted: "https://play.clubs.poker/?referralCode=104192", clean: "https://play.clubs.poker", category: "social" },
      { name: "Lonestar Casino", tilted: "https://lonestarcasino.com/refer/678504", clean: "https://lonestarcasino.com", category: "social" },
      { name: "Spree", tilted: "https://spree.com/?r=1450539", clean: "https://spree.com", category: "social" },
      { name: "SpinPals", tilted: "https://www.spinpals.com?referralcode=e851e1a8-c455-4a59-954d-b7fe0bbad04c", clean: "https://www.spinpals.com", category: "social" },
      { name: "FortuneWheelz", tilted: "https://fortunewheelz.com/?invited_by=P36ZS6", clean: "https://fortunewheelz.com", category: "social" },
      { name: "Zoot", tilted: "https://getzoot.us/?referralCode=ZOOTwithJMENICHOLE", clean: "https://getzoot.us", category: "social" },
      { name: "Spinsala", tilted: "https://spinsala.com/en?invite=daym", clean: "https://spinsala.com", category: "social" },
      { name: "Legendz", tilted: "https://legendz.com/?referred_by_id=221602", clean: "https://legendz.com", category: "social" },
    ];

    // --- Browser Notification Support ---
    let notificationsEnabled = false;
    function requestNotificationPermission() {
      if (!("Notification" in window)) return;
      if (Notification.permission === "granted") {
        notificationsEnabled = true;
      } else if (Notification.permission !== "denied") {
        Notification.requestPermission().then(permission => {
          notificationsEnabled = permission === "granted";
        });
      }
    }
    function notifyBonusAvailable(casino) {
      if (notificationsEnabled && "Notification" in window) {
        new Notification(`Bonus available!`, {
          body: `You can collect your bonus at ${casino}.`,
          icon: "/favicon.ico"
        });
      }
    }

    // --- Utility Functions ---
    function parseTimeInput(input) {
      if (!input) return NaN;
      input = input.toLowerCase().replace(/[^0-9hm\s\.\:]/g, '');
      // Accept formats like "2:30" as 2h 30m
      let total = 0;
      const colonMatch = input.match(/(\d+)\s*:\s*(\d+)/);
      if (colonMatch) {
        total += parseInt(colonMatch[1], 10) * 60 + parseInt(colonMatch[2], 10);
        return total;
      }
      const hourMatch = input.match(/(\d+(?:\.\d+)?)\s*h/);
      const minMatch = input.match(/(\d+(?:\.\d+)?)\s*m/);
      if (hourMatch) total += parseFloat(hourMatch[1]) * 60;
      if (minMatch) total += parseFloat(minMatch[1]);
      if (!hourMatch && !minMatch) {
        const num = parseFloat(input);
        if (!isNaN(num)) total += num;
      }
      if (!isFinite(total) || total <= 0) return NaN;
      return Math.round(total);
    }
    function showToast(msg) {
      const toast = document.querySelector('.toast');
      if (!toast) return;
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }
    function showGifPopup() {
      const el = document.getElementById("gif-popup");
      if (!el) return;
      el.innerHTML = `<img src="${gifUrls[Math.floor(Math.random() * gifUrls.length)]}" style="max-height:150px;" alt="Celebration GIF" />`;
      el.style.display = "block";
      confetti();
      setTimeout(() => { el.style.display = "none"; }, 5000);
    }
    function renderCountdown(label, ms) {
      const mins = Math.ceil(ms / 60000);
      const h = Math.floor(mins / 60), m = mins % 60;
      label.innerHTML = `<span class="flip-clock"><span class="digit">${h}</span>h <span class="digit">${m}</span>m</span>`;
      label.classList.remove('available');
      label.classList.add('timer');
    }
    function updateBonusCount() {
      const count = +(localStorage.getItem("collect_count") || 0);
      const el = document.getElementById("bonus-count");
      if (el) {
        el.textContent = `Bonuses Collected: ${count}`;
      }
    }
    function updateTimers() {
      document.querySelectorAll(".table-row").forEach(row => {
        const casino = row.dataset.casino;
        const label = row.querySelector(".last-collected");
        const box = row.querySelector("input");
        const next = localStorage.getItem("casino_" + casino);
        if (next && Date.now() < +next) {
          box.checked = true;
          box.disabled = true;
          renderCountdown(label, next - Date.now());
        } else {
          if (label.textContent !== "Available!") {
            try { uwuSound.play(); } catch {}
            notifyBonusAvailable(casino);
          }
          label.classList.remove('timer');
          label.classList.add('available');
          box.checked = false;
          box.disabled = false;
          label.textContent = "Available!";
        }
      });
    }
    function updateStats() { 
      // Simple stats update - maintains existing functionality
      updateBonusCount();
    }
    function showBonusModal(message) {
      return new Promise((resolve) => {
        const modal = document.getElementById('bonus-modal');
        if (!modal) return resolve(false);
        document.getElementById('bonus-modal-msg').textContent = message;
        modal.style.display = 'flex';
        const yesBtn = document.getElementById('bonus-modal-yes');
        const noBtn = document.getElementById('bonus-modal-no');
        function cleanup(result) {
          modal.style.display = 'none';
          yesBtn.removeEventListener('click', onYes);
          noBtn.removeEventListener('click', onNo);
        }
        function onYes() { cleanup(true); resolve(true); }
        function onNo() { cleanup(false); resolve(false); }
        yesBtn.addEventListener('click', onYes);
        noBtn.addEventListener('click', onNo);
      });
    }
    async function handleBonusClick(name) {
      const row = document.querySelector(`.table-row[data-casino="${name}"]`);
      if (!row) return;
      const box = row.querySelector("input");
      const label = row.querySelector(".last-collected");
      const firstCollectedKey = `casino_first_collected_${name}`;
      const timerKey = `casino_timer_${name}`;
      const alreadyCollected = localStorage.getItem(firstCollectedKey);
      let mins = 1440;
      if (!alreadyCollected) {
        const didCollect = await showBonusModal("Did you collect your bonus?");
        if (!didCollect) return true;
        localStorage.setItem(firstCollectedKey, "1");
        // Only ask the 24hr/timer question the first time
        const is24h = await showBonusModal("Is the next collection in 24 hours?");
        if (!is24h) {
          const input = prompt("How long until the next bonus? (e.g. 5h, 2h 30m, 90m)");
          mins = parseTimeInput(input);
          if (isNaN(mins) || mins <= 0) {
            showToast("Invalid input. Try formats like '5h', '2h 30m', or '90m'.");
            return false;
          }
          localStorage.setItem(timerKey, mins); // store custom timer
        } else {
          localStorage.setItem(timerKey, 1440); // store 24h as default
        }
      } else {
        // Use stored timer value for this casino
        mins = +(localStorage.getItem(timerKey) || 1440);
      }
      const next = Date.now() + mins * 60000;
      localStorage.setItem("casino_" + name, next);
      box.checked = true;
      box.disabled = true;
      // Only increment count on first collection per casino per day
      let count = +(localStorage.getItem("collect_count") || 0);
      if (!alreadyCollected) {
        count++;
        localStorage.setItem("collect_count", count);
        updateBonusCount();
      }
      showToast("Bonus collected!");
      updateStats();
      updateTimers();
      // Show GIF/confetti with 20% chance
      if (Math.random() < 0.2) showGifPopup();
      return true;
    }
    function toggleMode() {
      const body = document.body;
      const isLight = body.classList.toggle("light-mode");
      const h1 = document.querySelector("h1");
      if (h1) h1.textContent = isLight
        ? "Don't forget your daily bonus collection 💧"
        : "Degen mode activated. Don't forget the juice ⚡";
      document.title = isLight ? "🎯 Bonus Tracker - CollectClock" : "🎰 Tilted, baby";
      const modeBtn = document.querySelector(".toggle-mode");
      if (modeBtn) modeBtn.textContent = isLight ? "Tilt" : "Untilt";
      try {
        (isLight ? untiltSound : tiltSound).play();
      } catch {}
      if (!isLight && !localStorage.getItem("tiltConfettiShown")) {
        confetti();
        localStorage.setItem("tiltConfettiShown", "true");
      }
      localStorage.setItem("theme", isLight ? "light" : "dark");
      renderCasinoTable(); // update links for mode
    }
    // --- Search/Filter Logic ---
    let casinoFilter = "";
    const searchInput = document.getElementById("casino-search");
    const searchClearBtn = document.getElementById("casino-search-clear");
    if (searchInput) {
      searchInput.addEventListener("input", function() {
        casinoFilter = searchInput.value.trim().toLowerCase();
        renderCasinoTable();
        searchClearBtn.style.display = casinoFilter ? "inline-block" : "none";
      });
      searchInput.addEventListener("keydown", function(e) {
        if (e.key === "Escape") {
          searchInput.value = "";
          casinoFilter = "";
          renderCasinoTable();
          searchClearBtn.style.display = "none";
        }
      });
    }
    if (searchClearBtn) {
      searchClearBtn.addEventListener("click", function() {
        searchInput.value = "";
        casinoFilter = "";
        renderCasinoTable();
        searchClearBtn.style.display = "none";
        searchInput.focus();
      });
    }
    // --- Keyboard Navigation for Casino Rows ---
    function focusRow(idx) {
      const rows = Array.from(document.querySelectorAll(".table-row"));
      if (rows[idx]) {
        rows[idx].querySelector("a").focus();
      }
    }
    document.addEventListener("keydown", function(e) {
      if (document.activeElement && document.activeElement.closest(".table-row")) {
        const rows = Array.from(document.querySelectorAll(".table-row"));
        const current = rows.findIndex(r => r.contains(document.activeElement));
        if (e.key === "ArrowDown") {
          e.preventDefault();
          focusRow((current + 1) % rows.length);
        } else if (e.key === "ArrowUp") {
          e.preventDefault();
          focusRow((current - 1 + rows.length) % rows.length);
        } else if (e.key === "Tab" && e.shiftKey && current === 0) {
          // Allow shift-tab to wrap to last row
          focusRow(rows.length - 1);
          e.preventDefault();
        }
      }
    });
    // --- Keyboard Navigation for Modal ---
    const bonusModal = document.getElementById('bonus-modal');
    if (bonusModal) {
      bonusModal.addEventListener('keydown', function(e) {
        if (bonusModal.style.display !== 'flex') return;
        if (e.key === "Escape") {
          document.getElementById('bonus-modal-no').click();
        }
        if (e.key === "Tab") {
          // Trap focus inside modal
          const focusables = [document.getElementById('bonus-modal-yes'), document.getElementById('bonus-modal-no')];
          const idx = focusables.indexOf(document.activeElement);
          if (e.shiftKey) {
            if (idx <= 0) {
              focusables[focusables.length - 1].focus();
              e.preventDefault();
            }
          } else {
            if (idx === focusables.length - 1) {
              focusables[0].focus();
              e.preventDefault();
            }
          }
        }
      });
    }
    // --- Smoother Timers with requestAnimationFrame ---
    let lastTimerUpdate = 0;
    function updateTimersRAF(ts) {
      if (!lastTimerUpdate || ts - lastTimerUpdate > 1000) {
        updateTimers();
        lastTimerUpdate = ts;
      }
      requestAnimationFrame(updateTimersRAF);
    }
    // --- Category-based Casino Table Rendering ---
    function renderCasinoTable() {
      const availableContainer = document.getElementById("casino-table-available");
      const cooldownContainer = document.getElementById("casino-table-cooldown");
      if (!availableContainer || !cooldownContainer) return;
      availableContainer.innerHTML = "";
      cooldownContainer.innerHTML = "";
      
      const isTilted = !document.body.classList.contains("light-mode");
      let data = window.casinoData || [];
      
      // Apply search filter
      if (casinoFilter) {
        data = data.filter(c =>
          c.name.toLowerCase().includes(casinoFilter)
        );
      }
      
      // Define categories
      const categories = {
        crypto: { name: "🪙 Crypto Casinos", casinos: [] },
        instant: { name: "⚡ Instant Cashout", casinos: [] },
        sports: { name: "🏆 Sports Betting", casinos: [] },
        vpn: { name: "🌐 VPN Required", casinos: [] },
        social: { name: "🎰 Social Casinos", casinos: [] }
      };
      
      const now = Date.now();
      
      // Categorize and partition casinos
      data.forEach(casino => {
        const next = localStorage.getItem("casino_" + casino.name);
        const isAvailable = !next || now >= +next;
        const casinoData = isAvailable ? casino : { ...casino, next: +next };
        
        const category = casino.category || 'social';
        if (categories[category]) {
          categories[category].casinos.push({ ...casinoData, isAvailable });
        } else {
          categories.social.casinos.push({ ...casinoData, isAvailable });
        }
      });
      
      // Render available casinos by category
      let hasAvailable = false;
      Object.keys(categories).forEach(categoryKey => {
        const category = categories[categoryKey];
        const availableCasinos = category.casinos.filter(c => c.isAvailable);
        
        if (availableCasinos.length > 0) {
          hasAvailable = true;
          const section = createCategorySection(categoryKey, category.name, availableCasinos, true);
          availableContainer.appendChild(section);
        }
      });
      
      if (hasAvailable) {
        const header = document.createElement("h2");
        header.textContent = "Available to Collect";
        header.style.margin = "1.2em 0 1em 0";
        header.style.fontSize = "1.4em";
        header.style.textAlign = "center";
        availableContainer.insertBefore(header, availableContainer.firstChild);
      }
      
      // Render cooldown casinos by category
      let hasCooldown = false;
      Object.keys(categories).forEach(categoryKey => {
        const category = categories[categoryKey];
        const cooldownCasinos = category.casinos.filter(c => !c.isAvailable);
        
        if (cooldownCasinos.length > 0) {
          hasCooldown = true;
          // Sort by most time left
          cooldownCasinos.sort((a, b) => (b.next - now) - (a.next - now));
          const section = createCategorySection(categoryKey, category.name, cooldownCasinos, false);
          cooldownContainer.appendChild(section);
        }
      });
      
      if (hasCooldown) {
        const header = document.createElement("h2");
        header.textContent = "On Cooldown";
        header.style.margin = "2em 0 1em 0";
        header.style.fontSize = "1.3em";
        header.style.textAlign = "center";
        cooldownContainer.insertBefore(header, cooldownContainer.firstChild);
      }
      
      // Show/hide sections based on content
      if (casinoFilter) {
        if (!hasAvailable && !hasCooldown) {
          availableContainer.innerHTML = "<p style='text-align:center;color:var(--text);margin:2em;'>No casinos match your search.</p>";
          cooldownContainer.style.display = "none";
        } else {
          availableContainer.style.display = hasAvailable ? "" : "none";
          cooldownContainer.style.display = hasCooldown ? "" : "none";
        }
      } else {
        availableContainer.style.display = "";
        cooldownContainer.style.display = "";
      }
    }
    
    function createCategorySection(categoryKey, categoryName, casinos, isAvailable) {
      const section = document.createElement("div");
      section.className = `category-section category-${categoryKey}`;
      
      // Create header
      const header = document.createElement("div");
      header.className = "category-header";
      header.onclick = () => toggleCategory(section);
      
      const title = document.createElement("h3");
      title.className = "category-title";
      title.textContent = categoryName;
      
      const count = document.createElement("span");
      count.className = "category-count";
      count.textContent = casinos.length;
      
      const toggle = document.createElement("span");
      toggle.className = "category-toggle";
      toggle.textContent = "⌄";
      
      header.appendChild(title);
      header.appendChild(count);
      header.appendChild(toggle);
      
      // Create content
      const content = document.createElement("div");
      content.className = "category-content";
      
      const isTilted = !document.body.classList.contains("light-mode");
      const now = Date.now();
      
      casinos.forEach(casino => {
        const row = document.createElement("div");
        row.className = "table-row";
        row.dataset.casino = casino.name;
        
        let link = isTilted ? casino.tilted : (casino.clean || casino.tilted);
        
        if (isAvailable) {
          row.innerHTML = `
            <div class="tooltip">
              <a href="${link}" target="_blank" tabindex="0">${casino.name}</a>
              <span class="tooltiptext">${casino.tooltip || ''}</span>
            </div>
            <div><input type="checkbox" aria-label="Collected ${casino.name}?" tabindex="0" /></div>
            <div class="last-collected available">💎 Available! ✨</div>`;
        } else {
          const minsLeft = Math.ceil((casino.next - now) / 60000);
          const h = Math.floor(minsLeft / 60), m = minsLeft % 60;
          row.innerHTML = `
            <div class="tooltip">
              <a href="${link}" target="_blank" tabindex="0">${casino.name}</a>
              <span class="tooltiptext">${casino.tooltip || ''}</span>
            </div>
            <div><input type="checkbox" aria-label="Collected ${casino.name}?" tabindex="0" disabled /></div>
            <div class="last-collected timer"><span class="flip-clock"><span class="digit">${h}</span>h <span class="digit">${m}</span>m</span></div>`;
        }
        
        content.appendChild(row);
        
        // Attach event handlers
        const anchor = row.querySelector("a");
        anchor.addEventListener('click', (event) => {
          event.preventDefault();
          window.open(link, '_blank');
          setTimeout(() => handleBonusClick(casino.name), 100);
        });
        anchor.addEventListener('keydown', (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            anchor.click();
          }
        });
        
        const checkbox = row.querySelector("input[type=checkbox]");
        if (!checkbox.disabled) {
          checkbox.addEventListener('keydown', (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              checkbox.click();
            }
          });
          checkbox.addEventListener('click', () => {
            handleBonusClick(casino.name);
          });
        }
      });
      
      section.appendChild(header);
      section.appendChild(content);
      
      return section;
    }
    
    function toggleCategory(section) {
      section.classList.toggle('collapsed');
    }
    
    const infoBtn = document.getElementById('info-btn');
    const infoPopup = document.getElementById('info-popup');
    if (infoBtn && infoPopup) {
      infoBtn.addEventListener('click', function(e) {
        const isActive = infoBtn.classList.toggle('active');
        infoPopup.style.display = isActive ? 'block' : 'none';
        infoPopup.setAttribute('aria-hidden', !isActive);
        if (isActive) {
          setTimeout(() => {
            document.addEventListener('click', hideInfo, { once: true });
          }, 10);
          infoPopup.focus();
        }
        e.stopPropagation();
      });
      infoBtn.addEventListener('keydown', function(e) {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          infoBtn.click();
        }
      });
      function hideInfo(e) {
        if (!infoBtn.contains(e.target) && !infoPopup.contains(e.target)) {
          infoBtn.classList.remove('active');
          infoPopup.style.display = 'none';
          infoPopup.setAttribute('aria-hidden', 'true');
        }
      }
    }
    // --- Startup ---
    document.addEventListener("DOMContentLoaded", function() {
      const modeToggle = document.getElementById("mode-toggle");
      if (modeToggle) modeToggle.addEventListener("click", toggleMode);
      renderCasinoTable();
      updateTimers();
      updateStats();
      updateBonusCount();
      // Restore theme - dark is now default
      const theme = localStorage.getItem("theme");
      if (theme === "light") document.body.classList.add("light-mode");
      // Request notification permission
      requestNotificationPermission();
      // Focus search bar on load for accessibility
      if (searchInput) searchInput.setAttribute("tabindex", "0");
    });
    // --- Timers update ---
    requestAnimationFrame(updateTimersRAF);
  })();
  </script>
</body>
</html>
